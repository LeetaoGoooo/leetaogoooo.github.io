<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 5.4.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"leetaogoooo.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.9.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="Je pense, donc je suis">
<meta property="og:type" content="website">
<meta property="og:title" content="Leetao&#39;s Blog">
<meta property="og:url" content="https://leetaogoooo.github.io/page/16/">
<meta property="og:site_name" content="Leetao&#39;s Blog">
<meta property="og:description" content="Je pense, donc je suis">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Leetao">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://leetaogoooo.github.io/page/16/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/16/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Leetao's Blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Leetao's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Leetao's Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Talk is cheap, show me the code</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Leetao"
      src="/images/avatar.ico">
  <p class="site-author-name" itemprop="name">Leetao</p>
  <div class="site-description" itemprop="description">Je pense, donc je suis</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">188</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">70</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/leetaogoooo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;leetaogoooo" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:leetao94cn@gmail.com" title="E-Mail → mailto:leetao94cn@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/LeetaoGoooo" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;LeetaoGoooo" rel="noopener" target="_blank"><i class="fab fa-zhihu fa-fw"></i>Zhihu</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/leetaoGoooo" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;leetaoGoooo" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i>RSS</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2017/07/28/MySQL%E7%9A%84%E6%9F%A5%E8%AF%A2%E7%BC%93%E5%AD%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/28/MySQL%E7%9A%84%E6%9F%A5%E8%AF%A2%E7%BC%93%E5%AD%98/" class="post-title-link" itemprop="url">MySQL的查询缓存</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-07-28 00:00:00" itemprop="dateCreated datePublished" datetime="2017-07-28T00:00:00+08:00">2017-07-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-02-05 21:35:10" itemprop="dateModified" datetime="2022-02-05T21:35:10+08:00">2022-02-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="什么是查询缓存"><a href="#什么是查询缓存" class="headerlink" title="什么是查询缓存"></a>什么是查询缓存</h1><p>MySQL的查询缓存其实就是保存查询返回的完整结果.如果执相同 SQL 语句的时候,并且查询缓存是打开的,则 MySQL 会直接返回结果（在这一过程中 MySQL 还检查了一次用户权限）,跳过解析,优化和执行过程.这里判断 SQL 语句是否相同是通过一个对大小写铭感的哈希查找实现的,这就意味着下面两条查询缓存是不同的:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT id FROM t_user;</span><br><span class="line">select id from t_user;</span><br></pre></td></tr></table></figure>

<p>简单的了解了一下查询缓存,所以</p>
<h1 id="如何查看查询缓存的相关参数"><a href="#如何查看查询缓存的相关参数" class="headerlink" title="如何查看查询缓存的相关参数"></a>如何查看查询缓存的相关参数</h1><p>使用下述命令:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW VARIABLES LIKE &#x27;%query_cache%&#x27;;  </span><br></pre></td></tr></table></figure>

<p>结果:</p>
<p><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fhzmb80z47j307603sa9w.jpg"></p>
<p>其中:</p>
<ol>
<li>have_query_cache 查询缓存是否可用</li>
<li>query_cache_limit 可缓存具体结果的最大值</li>
<li>query_cache_size 查询缓存的大小</li>
<li>query_cache_type 阻止或者支持查询缓存</li>
</ol>
<h1 id="如何查看-SQL-查询在缓存中的命中的累积次数"><a href="#如何查看-SQL-查询在缓存中的命中的累积次数" class="headerlink" title="如何查看 SQL 查询在缓存中的命中的累积次数"></a>如何查看 SQL 查询在缓存中的命中的累积次数</h1><p>使用下述命令:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW STATUS LIKE &#x27;Qcache_hits&#x27;;</span><br></pre></td></tr></table></figure>

<h1 id="关于查询缓存"><a href="#关于查询缓存" class="headerlink" title="关于查询缓存"></a>关于查询缓存</h1><ol>
<li>当查询语句中有一些不确定的数据时,则不会被缓存。</li>
<li>如果表发生变化,那么跟这个表相关的所有的缓存数据都将失效,这里的变化包括:INSERT, UPDATE , DELETE, TRUNCATE, ALTER TABLE 等,由此可见对于频繁更新的表，显然是不适合使用查询缓存的.</li>
<li>查询缓存可能可以降低查询时间,但是不能减少查询结果传输的时间消耗,所以是否使用它,需要结合实际情况参考.</li>
</ol>
<p>对于第一条有如下的简单示例:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT COUNT(id) FROM t_user WHERE post_date &gt;= CURDATE(); // 不会被缓存</span><br><span class="line">SELECT COUNT(id) FROM t_user WHERE post_date &gt;= &#x27;2017-07-28&#x27;; // 会被缓存</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2017/07/25/define%E5%92%8Cconst%E7%9A%84%E5%8C%BA%E5%88%AB-PHP%E5%B8%B8%E9%87%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/25/define%E5%92%8Cconst%E7%9A%84%E5%8C%BA%E5%88%AB-PHP%E5%B8%B8%E9%87%8F/" class="post-title-link" itemprop="url">define和const的区别-PHP常量</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-07-25 00:00:00" itemprop="dateCreated datePublished" datetime="2017-07-25T00:00:00+08:00">2017-07-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-02-05 21:35:10" itemprop="dateModified" datetime="2022-02-05T21:35:10+08:00">2022-02-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="什么是常量？"><a href="#什么是常量？" class="headerlink" title="什么是常量？"></a>什么是常量？</h1><p>这点官方手册上写的很清楚.</p>
<blockquote>
<p>可以用 define()  函数来定义常量，在 PHP 5.3.0 以后，可以使用 const 关键字在类定义之外定义常量。一个常量一旦被定义，就不能再改变或者取消定义。<br>常量只能包含标量数据（ boolean ， integer ， float  和 string ）。可以定义 resource  常量，但应尽量避免，因为会造成不可预料的结果。<br>可以简单的通过指定其名字来取得常量的值，与变量不同，不应该在常量前面加上 $ 符号。如果常量名是动态的，也可以用函数 constant()  来获取常量的值。用 get_defined_constants()  可以获得所有已定义的常量列表。 </p>
</blockquote>
<h1 id="常量和变量的区别"><a href="#常量和变量的区别" class="headerlink" title="常量和变量的区别"></a>常量和变量的区别</h1><p>这点官方手册也同样提到了.</p>
<blockquote>
<ol>
<li>常量前面没有美元符号（$）；  </li>
<li> 常量只能用 define()  函数定义，而不能通过赋值语句；  </li>
<li> 常量可以不用理会变量的作用域而在任何地方定义和访问；  </li>
<li> 常量一旦定义就不能被重新定义或者取消定义；  </li>
<li> 常量的值只能是标量。 </li>
</ol>
</blockquote>
<h1 id="定义常量的方式"><a href="#定义常量的方式" class="headerlink" title="定义常量的方式"></a>定义常量的方式</h1><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">const</span> CONSTANT = <span class="string">&quot;Hello world&quot;</span>;</span><br><span class="line">define ( <span class="string">&quot;CONSTANT&quot;</span> ,  <span class="string">&quot;Hello world.&quot;</span> );</span><br><span class="line"> <span class="meta">?&gt;</span> </span><br></pre></td></tr></table></figure>

<h1 id="define-和-const-的区别"><a href="#define-和-const-的区别" class="headerlink" title="define 和 const 的区别"></a>define 和 const 的区别</h1><p>两者的根本区别在于<em>const</em>在编译期间定义常量,而<em>define</em>则是在执行期间。感觉某种程度上<em>const</em>有点类似Java中的<em>final</em>关键字。由于<em>const</em>运行在编译期间,所以就意味着:<br><strong><em>const</em> 关键字定义常量必须处于最顶端的作用区域</strong></p>
<p><strong>不能在函数内，循环内以及 <em>if</em> 语句之内用 <em>const</em> 来定义常量, <em>define</em> 可以</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (...) &#123;</span><br><span class="line">    <span class="keyword">const</span> CONSTANT = <span class="string">&#x27;Hello world&#x27;</span>;    <span class="comment">// 错误</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (...) &#123;</span><br><span class="line">    define ( <span class="string">&quot;CONSTANT&quot;</span> ,  <span class="string">&quot;Hello world.&quot;</span> ); <span class="comment">// 正确</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><em>const</em> 大小写敏感,<em>define</em>可以忽略大小写敏感</strong><br>const</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CONSTANT = <span class="string">&quot;Hello world&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> CONSTANT.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> Constant;</span><br></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Hello world</span><br><span class="line"></span><br><span class="line">Notice: Use of undefined constant Constant - assumed &#x27;Constant&#x27; in C:\Users\Leetao\Desktop\test.php on line 4</span><br><span class="line">Constant</span><br></pre></td></tr></table></figure>

<p>define</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">define ( <span class="string">&quot;CONSTANT&quot;</span> ,  <span class="string">&quot;Hello world.&quot;</span>, <span class="literal">true</span> );</span><br><span class="line"><span class="keyword">echo</span> CONSTANT.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> Constant;</span><br></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hello world.</span><br><span class="line">Hello world.</span><br></pre></td></tr></table></figure>

<p><strong><em>const</em> 只能接受静态的标量，而 <em>define</em> 可以采用任何表达式</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> BIT_5 = <span class="number">1</span> &lt;&lt; <span class="number">5</span>;    <span class="comment">// [1]</span></span><br><span class="line">define(<span class="string">&#x27;BIT_5&#x27;</span>, <span class="number">1</span> &lt;&lt; <span class="number">5</span>);  <span class="comment">// [2]</span></span><br></pre></td></tr></table></figure>
<p>其中 [1] 在 PHP 5.6 之后的版本都可以正常使用,[2] 一直都是正确的用法</p>
<p><em>*<em>const</em> 采用普通的常量名称，*define</em>可以采用表达式作为名称**</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span>  FOO = <span class="string">&#x27;BAR&#x27;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">32</span>; ++<span class="variable">$i</span>) &#123;</span><br><span class="line">define(<span class="string">&#x27;BIT_&#x27;</span> . <span class="variable">$i</span>, <span class="number">1</span> &lt;&lt; <span class="variable">$i</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em>*<em>const</em> 可以在当前命名空间定义常量，而*define</em>则需要补全路径**</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="title">A</span>\<span class="title">B</span>\<span class="title">C</span>;</span><br><span class="line"><span class="keyword">const</span> FOO = <span class="string">&#x27;BAR&#x27;</span>;</span><br><span class="line">define(<span class="string">&#x27;A\B\C\FOO&#x27;</span>, <span class="string">&#x27;BAR&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><em>*<em>const</em>可以在类或者接口中使用,而*define</em>不可以**</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> BAR = <span class="number">2</span>; <span class="comment">// 正确</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// but</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Baz</span> </span>&#123;</span><br><span class="line">    define(<span class="string">&#x27;QUX&#x27;</span>, <span class="number">2</span>); <span class="comment">// 错误</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>自PHP5.6之后 <em>const</em> 可以定义数组常量,而<em>define</em>在PHP7.0才可以</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> FOO = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; </span><br><span class="line">define(<span class="string">&#x27;FOO&#x27;</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); </span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2017/07/21/%E6%99%AE%E9%80%9A%E7%B1%BB%E6%96%B9%E6%B3%95%E5%92%8Cclassmethod%E5%92%8Cstaticmethod%E5%8C%BA%E5%88%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/21/%E6%99%AE%E9%80%9A%E7%B1%BB%E6%96%B9%E6%B3%95%E5%92%8Cclassmethod%E5%92%8Cstaticmethod%E5%8C%BA%E5%88%AB/" class="post-title-link" itemprop="url">普通类方法和classmethod和staticmethod区别</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-07-21 00:00:00" itemprop="dateCreated datePublished" datetime="2017-07-21T00:00:00+08:00">2017-07-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-02-05 21:35:10" itemprop="dateModified" datetime="2022-02-05T21:35:10+08:00">2022-02-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>最近写Python的时候,写类方法的时候,编译器老是建议我把一些方法改成静态方法,所以静态方法和普通方法有什么区别呢？当然提到了静态方法,也顺带提一下类方法，其中关于静态方法和类方法的区别，下面一段英文我觉得已经很好的解释了。</p>
<blockquote>
<p>@classmethod means: when this method is called, we pass the class as the first argument instead of the instance of that class (as we normally do with methods). This means you can use the class and its properties inside that method rather than a particular instance.<br>@staticmethod means: when this method is called, we don’t pass an instance of the class to it (as we normally do with methods). This means you can put a function inside a class but you can’t access the instance of that class (this is useful when your method does not use the instance).</p>
</blockquote>
<p>看完上述的解释,估计会有一些认识了，接下来让我们看一个具体的示例代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    test = <span class="number">1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,test</span>)</span></span><br><span class="line"><span class="function">        <span class="title">self</span>.<span class="title">test</span> = <span class="title">test</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="title">def</span> <span class="title">get_test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(self.test)</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sget_test</span>(<span class="params">test</span>):</span></span><br><span class="line">        <span class="built_in">print</span> test</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">cget_test</span>(<span class="params">cls</span>):</span></span><br><span class="line">        <span class="built_in">print</span> cls.test</span><br><span class="line"></span><br><span class="line">a = Test(<span class="number">2</span>)</span><br><span class="line">a.get_test() <span class="comment">#[1]</span></span><br><span class="line">a.sget_test(<span class="number">3</span>) <span class="comment">#[2]</span></span><br><span class="line">A.sget_test(<span class="number">3</span>) <span class="comment">#[3]</span></span><br><span class="line">Test.cget_test() <span class="comment">#[4]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>其结果如下:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">3</span><br><span class="line">3</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>上面的代码其实反映了这三种方法的使用场景,普通方法参数自带<em>self</em>,这说明，其侧重于对象实体调用，即它有很大程度上需要使用该对象实体特有的某些属性，这里代码指的就是实体<em>a</em>初始化传递的参数<em>2</em>;而静态方法则不管，对于它来说,无论是对象实体还是类调用,它的表现都一样(见代码[2],[3]处),由于其这种特性常被用来组织类之间有逻辑关系的函数;最后对于类方法来说,很显然它关于的是类本身而不是实体,如果你把一些方法定义成类方法,那么实际上你是希望用类来调用这个方法,而不是用这个类的实例来调用这个方法,示例代码中无论怎么被实例化,其类属性test永远都不会变~~</p>
<p>参考链接:<br><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/12179271/meaning-of-classmethod-and-staticmethod-for-beginner/12179325#12179325">Meaning of @classmethod and @staticmethod for beginner?</a><br><a target="_blank" rel="noopener" href="https://taizilongxu.gitbooks.io/stackoverflow-about-python/content/14/README.html">装饰器@staticmethod和@classmethod有什么区别?</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2017/07/18/any()%E5%92%8Call()%E5%AF%B9%E6%AF%94/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/18/any()%E5%92%8Call()%E5%AF%B9%E6%AF%94/" class="post-title-link" itemprop="url">any()和all()对比</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-07-18 00:00:00" itemprop="dateCreated datePublished" datetime="2017-07-18T00:00:00+08:00">2017-07-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-02-05 21:35:10" itemprop="dateModified" datetime="2022-02-05T21:35:10+08:00">2022-02-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>今天在Leetcode做题的时候,发现讨论区有人的代码出现使用了<em>any()<em>函数,查资料过程中,发现了还有一个</em>all()</em>,对这两个函数简单的对比总结一下.</p>
<h2 id="any"><a href="#any" class="headerlink" title="any(..)"></a><strong>any(..)</strong></h2><p>从python doc中得到如下图所示解释：<br><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fho2144raoj30ft0323yb.jpg"></p>
<p>其意思是对于可迭代对象中有任意一个不为False的时候,返回True,如果可迭代对象为空的话,返回False</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fho25rwjqwj30fu03ga9u.jpg"></p>
<h2 id="all"><a href="#all" class="headerlink" title="all(..)"></a><strong>all(..)</strong></h2><p>从python doc中得到下图所示解释:<br><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fho26v2fy8j30ft0390sj.jpg"></p>
<p>意思是对于可迭代对象中所有值都为True的情况下返回True,如果当可迭代对象为空的时候,也返回True</p>
<h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><p><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fho2ablm65j30fv03c3ya.jpg"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2017/06/07/The%20only%20supported%20ciphers%20are%20AES-128-CBC%20and%20AES-256-CBC%20with%20the%20correct%20key%20lengths/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/06/07/The%20only%20supported%20ciphers%20are%20AES-128-CBC%20and%20AES-256-CBC%20with%20the%20correct%20key%20lengths/" class="post-title-link" itemprop="url">The only supported ciphers are AES-128-CBC and AES-256-CBC with the correct key lengths</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-06-07 00:00:00" itemprop="dateCreated datePublished" datetime="2017-06-07T00:00:00+08:00">2017-06-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-02-05 21:35:10" itemprop="dateModified" datetime="2022-02-05T21:35:10+08:00">2022-02-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><img src="http://ww1.sinaimg.cn/large/d9e82fa4ly1fgcuwaft5lj20ul05274j.jpg"></p>
<h1 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h1><p>未设置 Application Key 导致。</p>
<h1 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h1><p>在项目根目录下执行下述命令:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan key:generate</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>:在执行该命令执行,需要先将 <em>.env.example</em> 复制并重新命名为 <em>.env</em>,否则会产生类似的错误信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PHP Fatal error:  Uncaught UnexpectedValueException: The stream or file &quot;/var/www/html/ASRM/storage/logs/laravel.log&quot; could not be opened: failed to open stream: Permission denied in /v</span><br><span class="line">ar/www/html/ASRM/vendor/monolog/monolog/src/Monolog/Handler/StreamHandler.php:107</span><br></pre></td></tr></table></figure>

<p>执行成功后会返回如下信息:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lt94@ubuntu:/var/www/html/ASRM$ php artisan key:generate</span><br><span class="line">Application key [base64:yUNJlAGBxWrxRutexftuJzVmzvllHXANxerkojqLscg=] set successfully.</span><br></pre></td></tr></table></figure>
<p>然后重新刷新页面,出现下图就说明没有问题了。</p>
<p><img src="http://ww1.sinaimg.cn/large/d9e82fa4ly1fgcuwg7hrij20w50edaa7.jpg"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2017/06/07/Whoops,%20looks%20like%20something%20went%20wrong/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/06/07/Whoops,%20looks%20like%20something%20went%20wrong/" class="post-title-link" itemprop="url">Whoops, looks like something went wrong</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-06-07 00:00:00" itemprop="dateCreated datePublished" datetime="2017-06-07T00:00:00+08:00">2017-06-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-02-05 21:35:10" itemprop="dateModified" datetime="2022-02-05T21:35:10+08:00">2022-02-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>搭建 Laravel 完成之后,尝试访问默认页面，然后出现了<br>**Whoops, looks like something went wrong.**的错误提示信息。<br><img src="http://ww1.sinaimg.cn/large/d9e82fa4ly1fgcuuws5uxj211p064mxj.jpg"></p>
<h1 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h1><p>由于 Laravel 对异常进行了封装,所以只显示文字，并没有将详细的异常信息打印出来。</p>
<h1 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h1><p>修改你项目中的配置文件,位置 <em>app/config/app.php</em> 在 <em>line 41</em>，将</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;debug&#x27;</span> =&gt; env(<span class="string">&#x27;APP_DEBUG&#x27;</span>, <span class="literal">False</span>)</span><br><span class="line"><span class="comment">//=&gt; 修改为</span></span><br><span class="line"><span class="string">&#x27;debug&#x27;</span> =&gt; env(<span class="string">&#x27;APP_DEBUG&#x27;</span>, <span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<p>然后就可以根据错误信息调试自己的代码了。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2017/06/07/php%20artisan%20migrate%20%E5%87%BA%E9%94%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/06/07/php%20artisan%20migrate%20%E5%87%BA%E9%94%99/" class="post-title-link" itemprop="url">php artisan migrate 出错</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-06-07 00:00:00" itemprop="dateCreated datePublished" datetime="2017-06-07T00:00:00+08:00">2017-06-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-02-05 21:35:10" itemprop="dateModified" datetime="2022-02-05T21:35:10+08:00">2022-02-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在执行 <em>php artisan migrate</em>出现如下错误:<br><img src="http://ww1.sinaimg.cn/large/d9e82fa4ly1fgcuzkgc7zj20og09xwfm.jpg"></p>
<p>从网上找到了如下的原因和解决办法</p>
<h1 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h1><p>MySql支持的utf8编码最大字符长度为3字节，如果遇到4字节的宽字符就会出现插入异常。三个字节UTF-8最大能编码的Unicode字符是0xffff，即Unicode中的基本多文种平面（BMP）。因而包括Emoji表情（Emoji是一种特殊的Unicode编码）在内的非基本多文种平面的Unicode字符都无法使用MySql的utf8字符集存储。</p>
<p>这也应该就是Laravel 5.4改用4字节长度的utf8mb4字符编码的原因之一。不过要注意的是，只有MySql 5.5.3版本以后才开始支持utf8mb4字符编码（查看版本：selection version();）。如果MySql版本过低，需要进行版本更新。</p>
<p><em>注：如果是从Laravel 5.3升级到Laravel 5.4，不需要对字符编码做切换。</em></p>
<h1 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h1><ol>
<li>升级MySql版本到5.5.3以上。</li>
<li>手动配置迁移命令migrate生成的默认字符串长度，在AppServiceProvider中调用Schema::defaultStringLength方法来实现配置：</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Support</span>\<span class="title">Facades</span>\<span class="title">Schema</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Bootstrap any application services.</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">boot</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   Schema::defaultStringLength(<span class="number">191</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h1><p>我的 MySQL 版本是 5.5.53,同样产生了如上的错误.不过发现相应的表还是正常生成了。</p>
<h1 id="再次出错"><a href="#再次出错" class="headerlink" title="再次出错"></a>再次出错</h1><p>之后通过使用 Artisan 工具新建 Model 类及其附属的 Migration 和 Seeder（数据填充）类,在使用 artisan 生成 Migration出现如下的错误:</p>
<p><img src="http://ww1.sinaimg.cn/large/d9e82fa4ly1fgcv521vjlj20o80a9q45.jpg"></p>
<p>由手册可知,执行上述命令行其实是在执行 <em>database/migrations</em>中的所有文件的 <em>up</em> 函数,于是尝试修改所有的 up 函数,增加如下的判断:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!Schema::hasTable(<span class="string">&#x27;table&#x27;</span>)) &#123;</span><br><span class="line">   <span class="comment">// 创建表</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>参考文章:<br><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000008416200">Laravel 5.4 migrate时报错: Specified key was too long error</a><br><a target="_blank" rel="noopener" href="http://www.cnblogs.com/betx/p/6544090.html">Laravel 5.4: 特殊字段太长报错</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2017/06/06/%E7%94%9F%E6%88%90%E5%99%A8(generator)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/06/06/%E7%94%9F%E6%88%90%E5%99%A8(generator)/" class="post-title-link" itemprop="url">生成器(generator)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-06-06 00:00:00" itemprop="dateCreated datePublished" datetime="2017-06-06T00:00:00+08:00">2017-06-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-02-05 21:35:10" itemprop="dateModified" datetime="2022-02-05T21:35:10+08:00">2022-02-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="What-is-yield"><a href="#What-is-yield" class="headerlink" title="What is yield"></a>What is <em>yield</em></h1><p><em>yield</em> 关键字返回生成器( generator )的数据。</p>
<blockquote>
<p>The heart of a generator function is the yield keyword. In its simplest form, a yield statement looks much like a return statement, except that instead of stopping execution of the function and returning, yield instead provides a value to the code looping over the generator and pauses execution of the generator function.</p>
</blockquote>
<h1 id="What-is-a-generator-function"><a href="#What-is-a-generator-function" class="headerlink" title="What is a generator function"></a>What is a generator function</h1><p>生成器函数是一种更为紧凑和有效编写迭代器的方法。它允许你定义一个函数,在循环时计算和返回结果。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">foreach</span> (xrange(<span class="number">1</span>, <span class="number">10</span>) <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;<span class="subst">$key</span> =&gt; <span class="subst">$value</span>&quot;</span>, PHP_EOL;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将会有如下的输出:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> =&gt; <span class="number">1</span></span><br><span class="line"><span class="number">1</span> =&gt; <span class="number">2</span></span><br><span class="line">…</span><br><span class="line"><span class="number">9</span> =&gt; <span class="number">10</span></span><br></pre></td></tr></table></figure>

<p>你同样可以控制在 <em>foreach</em> 中的 $key,通过如下的方式:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">yield</span> <span class="variable">$someKey</span> =&gt; <span class="variable">$someValue</span>;</span><br></pre></td></tr></table></figure>
<p>在生成器函数中,someKey 是你想要出现的 key,someVaue 则是 val 中的值。在例子中,它则是 i</p>
<h1 id="What’s-the-difference-to-normal-functions"><a href="#What’s-the-difference-to-normal-functions" class="headerlink" title="What’s the difference to normal functions?"></a>What’s the difference to normal functions?</h1><p>你可能会觉得我们用 PHP 原生的 range 函数同样也可以实现一样的输出，这点没错，但是最大的区别是这两种方式的输出是如何得到的。</p>
<p>当我们使用 range 的时候,它在内存中将整个数组创建出来,并将整个数组交给 foreach 去遍历。换句话说，foreach 将自己来操作整个数组。range 函数和 foreach 函数只交互了一次。想想我们接收邮件包裹，派送人员把包裹给你了，然后就离开了，剩下的就需要你自己去打开包裹并发现包裹里装的是什么了。</p>
<p>当我们使用生成函数时，PHP将进入函数并执行它，直到它满足结束或遇到 yield 关键字。 当它遇到 yield 时，它将返回当时值的任何值到外部循环。 然后它回到生成器，并继续从它产生的地方开始。 由于你的 xrange 拥有一个 for 循环，它将执行并产生，直到达到$max。想象一下 foreach 和生成器打乒乓球的场景。</p>
<h1 id="Why-do-I-need-that"><a href="#Why-do-I-need-that" class="headerlink" title="Why do I need that?"></a>Why do I need that?</h1><p>很显然，生成器可以被应用于内存有限的场景中。取决于你的环境而言，如果做一个 range(0,100000)循环可能导致你的脚本严重错误的话，使用生成器仍旧可以很好的运行。或者就如维基百科所言:</p>
<blockquote>
<p>Because generators compute their yielded values only on demand, they are useful for representing sequences that would be expensive or impossible to compute at once. These include e.g. infinite sequences and live data streams.</p>
</blockquote>
<p>生成器应该很快。 但请记住，当我们谈论很快时，我们通常是在非常少的场景中讨论。 所以在你现在跑掉并更改所有代码以使用生成器之前，请做一个基准测试，看看它在哪里有意义。</p>
<p>生成器的另一个用例是异步协同程序。 yield关键字不仅返回值，而且还接受它们</p>
<h1 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h1><p>PHP 的生成器不能满足所有迭代操作的需求，因为如果不查询，生成器永远不知道下一个要迭代的值是什么，在生成器中无法后退或者快进。生成器还是一次性的，无法多次迭代同一个生成器。不过，如果需要的，可以重建或者克隆生成器。</p>
<h1 id="待测试"><a href="#待测试" class="headerlink" title="待测试"></a>待测试</h1><p>未完待续，通过生成器是否能够解决大文件加载问题，已经是否能够提高读取速度问题。</p>
<p>整理翻译自:<br><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/17483806/what-does-yield-mean-in-php">What does yield mean in PHP?</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2017/06/02/Openlayers3%E4%BB%BF%E9%93%BE%E5%AE%B6%E7%BD%91%E6%95%88%E6%9E%9C(%E4%BA%8C)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/06/02/Openlayers3%E4%BB%BF%E9%93%BE%E5%AE%B6%E7%BD%91%E6%95%88%E6%9E%9C(%E4%BA%8C)/" class="post-title-link" itemprop="url">Openlayers3仿链家网效果(二)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-06-02 00:00:00" itemprop="dateCreated datePublished" datetime="2017-06-02T00:00:00+08:00">2017-06-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-02-05 21:35:10" itemprop="dateModified" datetime="2022-02-05T21:35:10+08:00">2022-02-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><img src="http://ww1.sinaimg.cn/large/d9e82fa4ly1feucc4km7cg20bv0djhdt.gif"></p>
<p>接着上一篇的demo,经过几天的折腾，基本上完成了类似链家网的效果.上一篇文章的地址<a target="_blank" rel="noopener" href="http://www.leetao94.cn/2017/03/28/Openlayers%E4%BB%BF%E9%93%BE%E5%AE%B6%E7%BD%91%E5%8A%A0%E8%BD%BD%E6%95%88%E6%9E%9C/">Openlayers3仿链家网效果</a></p>
<h1 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h1><h2 id="不同-Zoom-加载不同的图层"><a href="#不同-Zoom-加载不同的图层" class="headerlink" title="不同 Zoom 加载不同的图层"></a>不同 Zoom 加载不同的图层</h2><p>通过 view 的 chaneg:resolution 事件，在不同 zoom 下加载不同的图层</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> changeViewToZoom = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> view = map.getView();</span><br><span class="line">    view.on(<span class="string">&#x27;change:resolution&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> zoom = view.getZoom();</span><br><span class="line">        <span class="keyword">if</span> (zoom &gt;= xxxZoom) &#123;</span><br><span class="line">            <span class="comment">// 加载图层</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 加载其他图层</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="圆圈的绘制"><a href="#圆圈的绘制" class="headerlink" title="圆圈的绘制"></a>圆圈的绘制</h2><p>根据圆圈的中心点坐标和半径绘制圆</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  添加圆圈图层</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">genarateCircleLayer</span>(<span class="params">CircleObjArrs, title</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">arguments</span>[<span class="number">2</span>] != <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> createCircleLayer(createCircleSource(CircleObjArrs, <span class="built_in">arguments</span>[<span class="number">2</span>]), title);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> createCircleLayer(createCircleSource(CircleObjArrs), title)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createCircleLayer</span>(<span class="params">source, title</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> circleLayer = <span class="keyword">new</span> ol.layer.Vector(&#123;</span><br><span class="line">        <span class="attr">title</span>: title,</span><br><span class="line">        <span class="attr">source</span>: source,</span><br><span class="line">        <span class="attr">style</span>: circleStyleFunction</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> circleLayer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createCircleSource</span>(<span class="params">CircleObjArrs</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> view = map.getView();</span><br><span class="line">    <span class="keyword">var</span> zoom = view.getZoom();</span><br><span class="line">    <span class="keyword">var</span> CircleSource = <span class="keyword">new</span> ol.source.Vector();</span><br><span class="line">    <span class="keyword">var</span> radius = <span class="number">1</span> / <span class="built_in">Math</span>.pow(<span class="number">2</span>, zoom - <span class="number">6</span>);</span><br><span class="line">    <span class="comment">// 判断是否定义 radius,否则才用默认值</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> (<span class="built_in">arguments</span>[<span class="number">1</span>]) != <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">        radius = <span class="built_in">arguments</span>[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; CircleObjArrs.length; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> feature = <span class="keyword">new</span> ol.Feature(&#123;</span><br><span class="line">            <span class="attr">geometry</span>: <span class="keyword">new</span> ol.geom.Circle(CircleObjArrs[i].center, radius),</span><br><span class="line">            <span class="attr">text</span>: CircleObjArrs[i].text</span><br><span class="line">        &#125;);</span><br><span class="line">        CircleSource.addFeature(feature);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> CircleSource;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="展示效果"><a href="#展示效果" class="headerlink" title="展示效果"></a>展示效果</h2><p>展示效果包括:圆圈样式的切换,和圆圈下的图层显示.圆圈下的图层是在绘制圆圈的时候就一同加载了,只是样式设置透明，让它隐藏起来了,当鼠标移动到圆圈上，改变圆圈的样式的同时也改变了图层的样式，从而使得图层展示出来.主要调用<strong>forEachFeatureAtPixel</strong>方法，遍历当前坐标系下的所有feature,然后根据type切换不同样式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> displayFeature = <span class="function"><span class="keyword">function</span> (<span class="params">pixel</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> features = [];</span><br><span class="line">    map.forEachFeatureAtPixel(pixel, <span class="function"><span class="keyword">function</span> (<span class="params">feature, layer</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (layer.getVisible()) &#123; <span class="comment">// 当图层被隐藏之后,光标下该图层忽略</span></span><br><span class="line">            features.push(feature);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> len = features.length;</span><br><span class="line">    <span class="keyword">if</span> (len &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">var</span> text = features[i].getProperties().text;</span><br><span class="line">            <span class="keyword">var</span> type = features[i].getGeometry().getType();</span><br><span class="line">            features[i].setStyle(getSelectedPropertyStyle(type, text));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> featureArr = map.getLayers().getArray();</span><br><span class="line">        <span class="keyword">var</span> featureArr_len = featureArr.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; featureArr_len; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> featureArr[j].setStyle !== <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> source = featureArr[j].getSource();</span><br><span class="line">                features_by_source = source.getFeatures();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">var</span> feature_len = features_by_source.length;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> m = <span class="number">0</span>; m &lt; feature_len; m++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">typeof</span> features_by_source[m].getProperties().text === <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">                        text = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">var</span> text = features_by_source[m].getProperties().text</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">var</span> type = features_by_source[m].getGeometry().getType();</span><br><span class="line">                    features_by_source[m].setStyle(getUnselectedPropertyStyle(type, text));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getUnselectedPropertyStyle = <span class="function"><span class="keyword">function</span> (<span class="params">type, text</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> style = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (type == <span class="string">&#x27;Circle&#x27;</span>) &#123;</span><br><span class="line">        style = <span class="keyword">new</span> ol.style.Style(&#123;</span><br><span class="line">            <span class="attr">fill</span>: <span class="keyword">new</span> ol.style.Fill(&#123;</span><br><span class="line">                <span class="attr">color</span>: <span class="string">&#x27;rgba(57,172,106,0.9)&#x27;</span>,</span><br><span class="line">                <span class="attr">opacity</span>: <span class="string">&#x27;0.05&#x27;</span></span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="attr">text</span>: <span class="keyword">new</span> ol.style.Text(&#123;</span><br><span class="line">                <span class="attr">font</span>: <span class="string">&#x27;14px sans-serif&#x27;</span>,</span><br><span class="line">                <span class="attr">text</span>: text,</span><br><span class="line">                <span class="attr">textAlign</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">                <span class="attr">rotateWithView</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">fill</span>: <span class="keyword">new</span> ol.style.Fill(&#123;</span><br><span class="line">                    <span class="attr">color</span>: <span class="string">&#x27;#FFFFFF&#x27;</span></span><br><span class="line">                &#125;),</span><br><span class="line">                <span class="attr">stroke</span>: <span class="keyword">new</span> ol.style.Stroke(&#123;</span><br><span class="line">                    <span class="attr">color</span>: <span class="string">&#x27;#FFFFFF&#x27;</span>,</span><br><span class="line">                    <span class="attr">width</span>: <span class="number">1</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="comment">// radius:100</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (type == <span class="string">&#x27;MultiPolygon&#x27;</span> || type == <span class="string">&#x27;Polygon&#x27;</span>) &#123;</span><br><span class="line">        style = <span class="keyword">new</span> ol.style.Style(&#123;</span><br><span class="line">            <span class="attr">stroke</span>: <span class="keyword">new</span> ol.style.Stroke(&#123;</span><br><span class="line">                <span class="attr">color</span>: <span class="string">&#x27;rgba(255, 255, 0, 0)&#x27;</span>,</span><br><span class="line">                <span class="attr">width</span>: <span class="number">2</span></span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="attr">fill</span>: <span class="keyword">new</span> ol.style.Fill(&#123;</span><br><span class="line">                <span class="attr">color</span>: <span class="string">&#x27;rgba(255, 255, 0, 0)&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> style;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getSelectedPropertyStyle = <span class="function"><span class="keyword">function</span> (<span class="params">type, text</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> style = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (type == <span class="string">&#x27;Circle&#x27;</span>) &#123;</span><br><span class="line">        style = <span class="keyword">new</span> ol.style.Style(&#123;</span><br><span class="line">            <span class="attr">fill</span>: <span class="keyword">new</span> ol.style.Fill(&#123;</span><br><span class="line">                <span class="attr">color</span>: <span class="string">&#x27;rgba(228,57,60,0.9)&#x27;</span>,</span><br><span class="line">                <span class="attr">opacity</span>: <span class="string">&#x27;0.05&#x27;</span></span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="attr">text</span>: <span class="keyword">new</span> ol.style.Text(&#123;</span><br><span class="line">                <span class="attr">font</span>: <span class="string">&#x27;14px sans-serif&#x27;</span>,</span><br><span class="line">                <span class="attr">text</span>: text,</span><br><span class="line">                <span class="attr">textAlign</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">                <span class="comment">// rotateWithView:true,</span></span><br><span class="line">                <span class="attr">fill</span>: <span class="keyword">new</span> ol.style.Fill(&#123;</span><br><span class="line">                    <span class="attr">color</span>: <span class="string">&#x27;#FFFFFF&#x27;</span></span><br><span class="line">                &#125;),</span><br><span class="line">                <span class="attr">stroke</span>: <span class="keyword">new</span> ol.style.Stroke(&#123;</span><br><span class="line">                    <span class="attr">color</span>: <span class="string">&#x27;#FFFFFF&#x27;</span>,</span><br><span class="line">                    <span class="attr">width</span>: <span class="number">1</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (type == <span class="string">&#x27;MultiPolygon&#x27;</span> || type == <span class="string">&#x27;Polygon&#x27;</span>) &#123;</span><br><span class="line">        style = <span class="keyword">new</span> ol.style.Style(&#123;</span><br><span class="line">            <span class="attr">stroke</span>: <span class="keyword">new</span> ol.style.Stroke(&#123;</span><br><span class="line">                <span class="attr">color</span>: <span class="string">&#x27;green&#x27;</span>,</span><br><span class="line">                <span class="attr">width</span>: <span class="number">2</span></span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="attr">fill</span>: <span class="keyword">new</span> ol.style.Fill(&#123;</span><br><span class="line">                <span class="attr">color</span>: <span class="string">&#x27;rgba(57,172,106,0.1)&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> style;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2017/06/02/Openlayers3%E5%85%B3%E4%BA%8EMouseWheelZoom%E7%9A%84%E7%A6%81%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/06/02/Openlayers3%E5%85%B3%E4%BA%8EMouseWheelZoom%E7%9A%84%E7%A6%81%E7%94%A8/" class="post-title-link" itemprop="url">Openlayers3关于MouseWheelZoom的禁用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-06-02 00:00:00" itemprop="dateCreated datePublished" datetime="2017-06-02T00:00:00+08:00">2017-06-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-02-05 21:35:10" itemprop="dateModified" datetime="2022-02-05T21:35:10+08:00">2022-02-05</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>由于使用鼠标滚轮控制地图缩放不可控,所以决定禁用鼠标滚轮事件.代码如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">map.getInteractions().forEach(<span class="function"><span class="keyword">function</span> (<span class="params">interaction</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (interaction <span class="keyword">instanceof</span> ol.interaction.MouseWheelZoom) &#123;</span><br><span class="line">        map.removeInteraction(interaction);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/15/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/17/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Leetao</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"leetaoGoooo","repo":"leetaogoooo.github.io","client_id":"bf98ffa3f57b2591544e","client_secret":"cc5ffeff8863bb5c44ed10f024513dccfac14afa","admin_user":"leetaogoooo","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":null,"js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"deb82927b094fec176c3da14b72e1551"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
