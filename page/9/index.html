<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 5.4.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"leetaogoooo.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.9.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="Je pense, donc je suis">
<meta property="og:type" content="website">
<meta property="og:title" content="Leetao&#39;s Blog">
<meta property="og:url" content="https://leetaogoooo.github.io/page/9/">
<meta property="og:site_name" content="Leetao&#39;s Blog">
<meta property="og:description" content="Je pense, donc je suis">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Leetao">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://leetaogoooo.github.io/page/9/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/9/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Leetao's Blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Leetao's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Leetao's Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Talk is cheap, show me the code</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Leetao"
      src="/images/avatar.ico">
  <p class="site-author-name" itemprop="name">Leetao</p>
  <div class="site-description" itemprop="description">Je pense, donc je suis</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">191</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">72</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/leetaogoooo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;leetaogoooo" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:leetao94cn@gmail.com" title="E-Mail → mailto:leetao94cn@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/LeetaoGoooo" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;LeetaoGoooo" rel="noopener" target="_blank"><i class="fab fa-zhihu fa-fw"></i>Zhihu</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/leetaoGoooo" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;leetaoGoooo" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i>RSS</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2019/01/08/Rust%E7%AC%94%E8%AE%B0-%E6%A0%87%E8%AF%86%E7%AC%A6(Identifiers)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/01/08/Rust%E7%AC%94%E8%AE%B0-%E6%A0%87%E8%AF%86%E7%AC%A6(Identifiers)/" class="post-title-link" itemprop="url">Rust笔记-标识符(Identifiers)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-01-08 00:00:00" itemprop="dateCreated datePublished" datetime="2019-01-08T00:00:00+08:00">2019-01-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-12 15:04:10" itemprop="dateModified" datetime="2022-04-12T15:04:10+08:00">2022-04-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>和其他语言一样 Rust 同样有 <strong>变量,函数,结构体</strong>等其他概念,因此也需要 <strong>标识符</strong>, 那么关于 Rust 的标识符命名规则和其他语言一样吗?</p>
<h1 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h1><ol>
<li>和所有语言一样, Rust 同样不能使用关键字 (keyword) 不能作为标识符</li>
<li>当首字符是字母的时候:<ol>
<li>余下的字符可以是字母或者下划线( _ )</li>
</ol>
</li>
<li>当首字符是下划线 ( _ ) 时候:<ol>
<li>标识符长度必须不能小于两字符</li>
<li>余下的字符可以是字母或者下划线( _ )</li>
</ol>
</li>
</ol>
<p>相较于其他语言, Rust 中并<strong>不允许数字</strong>作为标识符的一部分.除此之外, Rust 还有一个 <strong>Raw identifiers</strong> 的概念.</p>
<h1 id="Raw-identifier"><a href="#Raw-identifier" class="headerlink" title="Raw identifier"></a>Raw identifier</h1><p>有的时候你不得不使用 <strong>关键词(keyword)</strong>,比如,当你需要调用一个 c 语言库,碰巧它有个函数名称叫做 <em><strong>match</strong></em>, 为了正常调用这个时候,我们就需要用到 <strong>raw identifier</strong> 了. 使用方法很简单,在函数的开头加上 <strong>r#</strong> 符号即可.</p>
<p>可以看一下官网给的例子:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> r#<span class="function"><span class="keyword">fn</span> = &quot;<span class="title">this</span> <span class="title">variable</span> <span class="title">is</span> <span class="title">named</span> &#x27;<span class="title">fn</span>&#x27; <span class="title">even</span> <span class="title">though</span> <span class="title">that</span>&#x27;<span class="title">s</span> <span class="title">a</span> <span class="title">keyword</span>&quot;; </span></span><br><span class="line"><span class="function">// <span class="title">call</span> <span class="title">a</span> <span class="title">function</span> <span class="title">named</span> &#x27;<span class="title">match</span>&#x27; </span></span><br><span class="line"><span class="function"><span class="title">r</span>#<span class="title">match</span></span>();</span><br></pre></td></tr></table></figure>

<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a target="_blank" rel="noopener" href="https://doc.rust-lang.org/book/ch03-00-common-programming-concepts.html#identifiers">Identifiers</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2019/01/07/%E4%BB%80%E4%B9%88%E6%98%AF%20__future__%20%E6%A8%A1%E5%9D%97%20%EF%BC%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/01/07/%E4%BB%80%E4%B9%88%E6%98%AF%20__future__%20%E6%A8%A1%E5%9D%97%20%EF%BC%9F/" class="post-title-link" itemprop="url">什么是 __future__ 模块 ？</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-01-07 00:00:00" itemprop="dateCreated datePublished" datetime="2019-01-07T00:00:00+08:00">2019-01-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-12 15:04:10" itemprop="dateModified" datetime="2022-04-12T15:04:10+08:00">2022-04-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>不知道大家有没有注意到 python 有一个  __future__  模块，如果大家有人看开源项目兼容 py2 和 py3 的话，它们的源代码中会经常出现这个模块，那么这个模块究竟有什么作用呢？</p>
<h1 id="future"><a href="#future" class="headerlink" title="__future__"></a>__future__</h1><p>关于 __future__ 的作用，官方文档中也有明确提到，让我们看一下:</p>
<blockquote>
<p>_<em>future_</em> is a real module, and serves three purposes:</p>
</blockquote>
<ol>
<li>To avoid confusing existing tools that analyze import statements and expect to find the modules they’re importing.</li>
<li>To ensure that future statements run under releases prior to 2.1 at least yield runtime exceptions (the import of __future__ will fail, because there was no module of that name prior to 2.1).</li>
<li>To document when incompatible changes were introduced, and when they will be — or were — made mandatory. This is a form of executable documentation, and can be inspected programmatically via importing __future__ and examining its contents.</li>
</ol>
<p>翻译过来大致意思如下:</p>
<ol>
<li>为了避免混淆现有工具，分析import语句和期望找到他们要导入的模块。</li>
<li>确保2.1之前的版本导入 __future__产生运行时异常，因为2.1之前没有这个模块</li>
<li>记录何时引入了不兼容的更改，以及何时将其强制执行。 这是一种可执行文档，可以通过导入 __future__进行可编程式检查。</li>
</ol>
<p>看完的感觉是不是这样的？</p>
<p><img src="http://ww1.sinaimg.cn/thumbnail/006wYWbGly1fyy8rbifu0j30jg0eoab9.jpg"></p>
<p>如果是的话，就对了。别看官方文档上面写的很邪乎，其实总结起来很简单， python 在新版本会引入某些新的功能特性，但是有的时候有些改动是不兼容旧版本的，举个例子说，比如你的项目是用的是 py2.7，现在你需要迁移到 3.x 版本，直接升级到 3.x 肯定是不行的，那怎么办呢？这个时候就需要用到 _<em>future_</em> 了，我们可以通过 _<em>future_</em> 导入新版本某些模块，测试新版本的新功能，等测试成功后再升级到新的版本上.</p>
<h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><p>说完了，我们举个最典型的例子， <strong>print</strong>, 使用过 py2.7 和 py3.x 的小伙伴肯定都知道，在 3.x 的时候，print 成了一下函数，那么让我们在 py2.7 通过 __future__ 感受一下</p>
<p><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fyy9575xrej30bc04qdg1.jpg"></p>
<p>除了 print，还有其他不少类似的，在官方文档中都有提及到，我这里就简单截个图，有兴趣的可以自己去官网研究一下</p>
<p><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fyy97sxesuj30lo075abh.jpg"></p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a target="_blank" rel="noopener" href="https://docs.python.org/3.6/library/__future__.html?highlight=__future__#module-__future__">__future__ — Future statement definitions</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/7075082/what-is-future-in-python-used-for-and-how-when-to-use-it-and-how-it-works">What is __future__ in Python used for and how/when to use it, and how it works</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2019/01/04/-is-%20%E5%92%8C%20-==-%20%E7%9A%84%E6%95%85%E4%BA%8B%20/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/01/04/-is-%20%E5%92%8C%20-==-%20%E7%9A%84%E6%95%85%E4%BA%8B%20/" class="post-title-link" itemprop="url">-is- 和 -==- 的故事</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-01-04 00:00:00" itemprop="dateCreated datePublished" datetime="2019-01-04T00:00:00+08:00">2019-01-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-12 15:04:10" itemprop="dateModified" datetime="2022-04-12T15:04:10+08:00">2022-04-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>相比写过 Python 的小伙伴对 “is” 和 “==” 这两个运算符肯定不会陌生,但是你真的能清楚两者的区别吗? 别着急,听我慢慢道来.</p>
<h1 id="is-和"><a href="#is-和" class="headerlink" title="is 和 =="></a>is 和 ==</h1><p>“is” 和 “==” 都是用来比较两个对象的,区别在于 “is” 是用来判断,两个对象是否为相同,即它们实际的内存地址是否相等,也就是说 <strong>id()</strong> 值是否一样, 而 “==” 就很简单了,它只是比较两个对象的值是不是相同.</p>
<p>是不是很简单,让我们结合之前的知识点进行简单的测试.</p>
<h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><p>1.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;leetao&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">&quot;leetao&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a == b <span class="comment"># </span></span><br><span class="line">&gt;&gt;&gt;&gt; a <span class="keyword">is</span> b <span class="comment"># </span></span><br></pre></td></tr></table></figure>
<p>第一组输出分别是什么呢?让我们揭晓答案:</p>
<p><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fyukc0x53ij30b00560sl.jpg"></p>
<p>这个例子如果错了,需要看一下我之前写的关于字符串池化的那篇文章了,这里字符串 “leetao” 被池化了,所以 a,b 两者实际指向同一块内存.</p>
<p>2.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = b = [<span class="string">&quot;l&quot;</span>,<span class="string">&quot;e&quot;</span>,<span class="string">&quot;e&quot;</span>,<span class="string">&quot;t&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;o&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = [<span class="string">&quot;l&quot;</span>,<span class="string">&quot;e&quot;</span>,<span class="string">&quot;e&quot;</span>,<span class="string">&quot;t&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;o&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b <span class="comment"># </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a == b <span class="comment"># </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> c <span class="comment"># </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a == c <span class="comment"># </span></span><br></pre></td></tr></table></figure>

<p>第二组的正确答案:</p>
<p><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fyukdqu3qjj30gf08njrd.jpg"></p>
<p>这个例子也不能理解,之前关于字符串池化的时候,也提过类似的例子,a,b 在同一行赋值, python 解释器进行了优化,将两者指向同一个对象,所以导致 a 和 b 值相等, id 也相等, 至于 a 和 c 很好理解,它们值相等,但是很明显,id值不一样.</p>
<p>3</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">256</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">256</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b <span class="comment"># </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a == b <span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c <span class="keyword">is</span> d <span class="comment">#</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c == d <span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>第三组就更有意思了,答案:</p>
<p><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fyukezmmo8j307n0a4q2w.jpg"></p>
<p>这个例子,牵扯到另外一个知识点,关于 Integer 对象的一个小的知识点,让我们看一下官方原文:</p>
<blockquote>
<p>The current implementation keeps an array of integer objects for all integers between -5 and 256, when you create an int in that range you actually just get back a reference to the existing object. So it should be possible to change the value of 1. I suspect the behaviour of Python in this case is undefined. :-)</p>
</blockquote>
<p>翻译过来的意思大致就是: 当前实现为-5到256之间的所有整数保留一个整数对象数组，当您在该范围内创建一个int时，实际上只返回对现有对象的引用。 因此应该可以更改值1.我怀疑在这种情况下Python的行为是未定义的。:-)</p>
<p>有了这个知识作为前提,就不难理解,上面的例子的答案了.</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/c-api/long.html#c.PyLong_FromLong">Integer Objects</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2019/01/04/-is-%20%E5%92%8C%20-==-%20%E7%9A%84%E6%95%85%E4%BA%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/01/04/-is-%20%E5%92%8C%20-==-%20%E7%9A%84%E6%95%85%E4%BA%8B/" class="post-title-link" itemprop="url">-is- 和 -==- 的故事</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-01-04 00:00:00" itemprop="dateCreated datePublished" datetime="2019-01-04T00:00:00+08:00">2019-01-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-12 15:04:10" itemprop="dateModified" datetime="2022-04-12T15:04:10+08:00">2022-04-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>相比写过 Python 的小伙伴对 “is” 和 “==” 这两个运算符肯定不会陌生,但是你真的能清楚两者的区别吗? 别着急,听我慢慢道来.</p>
<h1 id="is-和"><a href="#is-和" class="headerlink" title="is 和 =="></a>is 和 ==</h1><p>“is” 和 “==” 都是用来比较两个对象的,区别在于 “is” 是用来判断,两个对象是否为相同,即它们实际的内存地址是否相等,也就是说 <strong>id()</strong> 值是否一样, 而 “==” 就很简单了,它只是比较两个对象的值是不是相同.</p>
<p>是不是很简单,让我们结合之前的知识点进行简单的测试.</p>
<h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><p>1.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">&quot;leetao&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="string">&quot;leetao&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a == b <span class="comment"># </span></span><br><span class="line">&gt;&gt;&gt;&gt; a <span class="keyword">is</span> b <span class="comment"># </span></span><br></pre></td></tr></table></figure>
<p>第一组输出分别是什么呢?让我们揭晓答案:</p>
<p><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fyukc0x53ij30b00560sl.jpg"></p>
<p>这个例子如果错了,需要看一下我之前写的关于字符串池化的那篇文章了,这里字符串 “leetao” 被池化了,所以 a,b 两者实际指向同一块内存.</p>
<p>2.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = b = [<span class="string">&quot;l&quot;</span>,<span class="string">&quot;e&quot;</span>,<span class="string">&quot;e&quot;</span>,<span class="string">&quot;t&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;o&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = [<span class="string">&quot;l&quot;</span>,<span class="string">&quot;e&quot;</span>,<span class="string">&quot;e&quot;</span>,<span class="string">&quot;t&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;o&quot;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b <span class="comment"># </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a == b <span class="comment"># </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> c <span class="comment"># </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a == c <span class="comment"># </span></span><br></pre></td></tr></table></figure>

<p>第二组的正确答案:</p>
<p><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fyukdqu3qjj30gf08njrd.jpg"></p>
<p>这个例子也不能理解,之前关于字符串池化的时候,也提过类似的例子,a,b 在同一行赋值, python 解释器进行了优化,将两者指向同一个对象,所以导致 a 和 b 值相等, id 也相等, 至于 a 和 c 很好理解,它们值相等,但是很明显,id值不一样.</p>
<p>3</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">256</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">256</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b <span class="comment"># </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a == b <span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = <span class="number">257</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c <span class="keyword">is</span> d <span class="comment">#</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c == d <span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>第三组就更有意思了,答案:</p>
<p><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fyukezmmo8j307n0a4q2w.jpg"></p>
<p>这个例子,牵扯到另外一个知识点,关于 Integer 对象的一个小的知识点,让我们看一下官方原文:</p>
<blockquote>
<p>The current implementation keeps an array of integer objects for all integers between -5 and 256, when you create an int in that range you actually just get back a reference to the existing object. So it should be possible to change the value of 1. I suspect the behaviour of Python in this case is undefined. :-)</p>
</blockquote>
<p>翻译过来的意思大致就是: 当前实现为-5到256之间的所有整数保留一个整数对象数组，当您在该范围内创建一个int时，实际上只返回对现有对象的引用。 因此应该可以更改值1.我怀疑在这种情况下Python的行为是未定义的。:-)</p>
<p>有了这个知识作为前提,就不难理解,上面的例子的答案了.</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/c-api/long.html#c.PyLong_FromLong">Integer Objects</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2019/01/03/%E5%9F%BA%E4%BA%8E%20Ajax%20%E8%AF%B7%E6%B1%82%E7%9A%84%20Flask-Login%20%E8%AE%A4%E8%AF%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/01/03/%E5%9F%BA%E4%BA%8E%20Ajax%20%E8%AF%B7%E6%B1%82%E7%9A%84%20Flask-Login%20%E8%AE%A4%E8%AF%81/" class="post-title-link" itemprop="url">基于 Ajax 请求的 Flask-Login 认证</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-01-03 00:00:00" itemprop="dateCreated datePublished" datetime="2019-01-03T00:00:00+08:00">2019-01-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-12 15:04:10" itemprop="dateModified" datetime="2022-04-12T15:04:10+08:00">2022-04-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>index.html<br>example.py</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## index.html</span><br><span class="line"></span><br><span class="line">```index.html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt; test login by Leetao&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;p id=&quot;test_login&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;button onclick=&quot;load_msg()&quot;&gt;未点击&lt;/button&gt;</span><br><span class="line">        &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script&gt;</span><br><span class="line">            var load_msg = function () &#123;</span><br><span class="line">                $.get(&#x27;/hello?api_key=test_login&#x27;,function(data)&#123;</span><br><span class="line">                    $(&#x27;#test_login&#x27;)[0].innerText = data</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &lt;/script&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="example-py"><a href="#example-py" class="headerlink" title="example.py"></a>example.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, jsonify, render_template</span><br><span class="line"><span class="keyword">from</span> flask_login <span class="keyword">import</span> LoginManager, current_user, login_required</span><br><span class="line">login_manager = LoginManager()</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">login_manager.init_app(app)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,user_name</span>):</span></span><br><span class="line">        self.<span class="built_in">id</span> = <span class="string">&#x27;test_id&#x27;</span></span><br><span class="line">        self.user_name = user_name</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_active</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_authenticated</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">is_anonymous</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_id</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">return</span> text_type(self.<span class="built_in">id</span>)</span><br><span class="line">        <span class="keyword">except</span> AttributeError:</span><br><span class="line">            <span class="keyword">raise</span> NotImplementedError(<span class="string">&#x27;No `id` attribute - override `get_id`&#x27;</span>)</span><br><span class="line"></span><br><span class="line">user = User(<span class="string">&quot;leetao&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@login_manager.request_loader</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_from_request</span>(<span class="params">request</span>):</span></span><br><span class="line">    api_key = request.args.get(<span class="string">&#x27;api_key&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> api_key == <span class="string">&#x27;test_login&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> user</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/hello&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">@login_required</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(current_user.user_name)</span><br><span class="line">    <span class="keyword">return</span> jsonify(<span class="string">&#x27;Hello, World!&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&quot;/&quot;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>():</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;index.html&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p>为了方便理解,我截了两张图,一张是 api_key 正确的情况下,一张是 错误的情况下</p>
<h3 id="api-key-正确"><a href="#api-key-正确" class="headerlink" title="api_key 正确"></a>api_key 正确</h3><p><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fytiw435blj30zh0g740b.jpg"></p>
<h3 id="api-key-错误"><a href="#api-key-错误" class="headerlink" title="api_key 错误"></a>api_key 错误</h3><p><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fytiwcjbcej30vk0i1abi.jpg"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2018/12/31/Dict%20%E9%94%AE%E5%80%BC%E5%92%8C%20Number%20%E7%9A%84%E6%95%85%E4%BA%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/12/31/Dict%20%E9%94%AE%E5%80%BC%E5%92%8C%20Number%20%E7%9A%84%E6%95%85%E4%BA%8B/" class="post-title-link" itemprop="url">Dict 键值和 Number 的故事</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-12-31 00:00:00" itemprop="dateCreated datePublished" datetime="2018-12-31T00:00:00+08:00">2018-12-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-12 15:04:10" itemprop="dateModified" datetime="2022-04-12T15:04:10+08:00">2022-04-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>字典(Dict)，在大家写 Python 程序中，肯定会经常用到它，但是它在官方的文档有一段话，不知道大家有没有注意到，官方原文是这样的</p>
<blockquote>
<p>A dictionary’s keys are almost arbitrary values. Values that are not hashable, that is, values containing lists, dictionaries or other mutable types (that are compared by value rather than by object identity) may not be used as keys. Numeric types used for keys obey the normal rules for numeric comparison: if two numbers compare equal (such as 1 and 1.0) then they can be used interchangeably to index the same dictionary entry. (Note however, that since computers store floating-point numbers as approximations it is usually unwise to use them as dictionary keys.)</p>
</blockquote>
<p>如果你看到这里已经明白了我想说的内容的话，那么恭喜你可以节约几分钟的时间了，不需要阅读本篇文章了，没看明白的小伙伴，可以接着看下面的例子。</p>
<h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = &#123;&#125;</span><br><span class="line">&gt;&gt;&gt; a[1.0]=<span class="string">&quot;元旦快乐&quot;</span></span><br><span class="line">&gt;&gt;&gt; a[1] = <span class="string">&quot;新年快乐&quot;</span></span><br><span class="line"><span class="comment"># a[1.0] = ?</span></span><br></pre></td></tr></table></figure>
<p>问题来了，这时候我们试着输出 <strong>a[1.0]</strong> 会发生什么呢？</p>
<p><img src="https://t1.picb.cc/uploads/2018/12/31/Jo1ch0.png"></p>
<h1 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h1><p>是不是觉得很神奇？这是为什么呢？划重点的时候到了,注意上面的官方文档中的一句话。</p>
<blockquote>
<p>Numeric types used for keys obey the normal rules for numeric comparison: if two numbers compare equal (such as 1 and 1.0) then they can be used interchangeably to index the same dictionary entry.</p>
</blockquote>
<p>其意思很简单，用于键数字类型遵循正常数值比较规则：如果两个数比较相等（如1和1.0），那么他们可以互换使用，以索引相同的字典条目。</p>
<p>等等，这是不是就意味着 <strong>1 == 1.0 ?</strong>,真的是这样吗？别着急，看下去。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; 1 == 1.0</span><br><span class="line">True</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">hash</span>(1) == <span class="built_in">hash</span>(1.0)</span><br><span class="line">True</span><br></pre></td></tr></table></figure>

<p>所以这就不难理解，为什么 a[1.0] 的值，被后面的 a[1] 覆盖了。最后官方也建议，不要用他们作为字典的键值。</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a target="_blank" rel="noopener" href="https://docs.python.org/3.6/library/stdtypes.html#mapping-types-dict">Mapping Types – dict</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/32209155/why-can-a-floating-point-dictionary-key-overwrite-an-integer-key-with-the-same-v/32211042#32211042">Why can a floating point dictionary key overwrite an integer key with the same value?</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2018/12/24/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%B1%A0%E5%8C%96%20python/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/12/24/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%B1%A0%E5%8C%96%20python/" class="post-title-link" itemprop="url">字符串池化 python</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-12-24 00:00:00" itemprop="dateCreated datePublished" datetime="2018-12-24T00:00:00+08:00">2018-12-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-12 15:04:10" itemprop="dateModified" datetime="2022-04-12T15:04:10+08:00">2022-04-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在 Python 中经常通过内存池化技术来提高其性能,那么问题来了,在什么情况下会池化呢? 让我们通过几个例子进行一下理解一下.</p>
<h1 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h1><p>在查看例子之前,首先要提 python 中的一个函数 <strong>id()</strong>,让我们看一下函数说明:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">id(obj, /)</span><br><span class="line">    Return the identity of an object.</span><br><span class="line"></span><br><span class="line">    This is guaranteed to be unique among simultaneously existing objects.</span><br><span class="line">    (CPython uses the object \<span class="string">&#x27;s memory address.)</span></span><br></pre></td></tr></table></figure>

<p>通过上述说明,可以得知 id() 将会返回对像的唯一标识,在 CPython 中将会返回内存地址,也就是说如果两个对象 的 id 值一样,可以说着两个对象是相同的了.</p>
<h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><p>example 00</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&quot;&quot;</span></span><br><span class="line">b = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(a),<span class="built_in">id</span>(b))</span><br><span class="line"><span class="built_in">print</span>(a <span class="keyword">is</span> b)</span><br></pre></td></tr></table></figure>

<p>输出结果:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = <span class="string">&quot;&quot;</span></span><br><span class="line">&gt;&gt;&gt; b = <span class="string">&quot;&quot;</span></span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(id(a),id(b))</span><br><span class="line">2114853370544 2114853370544</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(a is b)</span><br><span class="line">True</span><br></pre></td></tr></table></figure>

<p>example 01</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&quot;a&quot;</span></span><br><span class="line">b = <span class="string">&quot;a&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(a),<span class="built_in">id</span>(b))</span><br><span class="line"><span class="built_in">print</span>(a <span class="keyword">is</span> b)</span><br></pre></td></tr></table></figure>

<p>输出结果:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = <span class="string">&quot;a&quot;</span></span><br><span class="line">&gt;&gt;&gt; b = <span class="string">&quot;a&quot;</span></span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(id(a),id(b))</span><br><span class="line">2114883022608 2114883022608</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(a is b)</span><br><span class="line">True</span><br></pre></td></tr></table></figure>

<p>example 02</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&quot;magic_string&quot;</span></span><br><span class="line">b = <span class="string">&quot;magic&quot;</span> + <span class="string">&quot;_&quot;</span> + <span class="string">&quot;string&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(a),<span class="built_in">id</span>(b))</span><br><span class="line"><span class="built_in">print</span>(a <span class="keyword">is</span> b)</span><br></pre></td></tr></table></figure>

<p>输出结果:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = <span class="string">&quot;magic_string&quot;</span></span><br><span class="line">&gt;&gt;&gt; b = <span class="string">&quot;magic&quot;</span> + <span class="string">&quot;_&quot;</span> + <span class="string">&quot;string&quot;</span></span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(id(a),id(b))</span><br><span class="line">2114887161136 2114887161136</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(a is b)</span><br><span class="line">True</span><br></pre></td></tr></table></figure>

<p>example 03</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&quot;magic!&quot;</span></span><br><span class="line">b = <span class="string">&quot;mgaic!&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(a),<span class="built_in">id</span>(b))</span><br><span class="line"><span class="built_in">print</span>(a <span class="keyword">is</span> b)</span><br></pre></td></tr></table></figure>

<p>输出结果:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = <span class="string">&quot;magic!&quot;</span></span><br><span class="line">&gt;&gt;&gt; b = <span class="string">&quot;mgaic!&quot;</span></span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(id(a),id(b))</span><br><span class="line">2114885855416 2114889455408</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(a is b)</span><br><span class="line">False</span><br></pre></td></tr></table></figure>

<p>example 04</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a,b = <span class="string">&quot;magic!&quot;</span>,<span class="string">&quot;magic!&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(a),<span class="built_in">id</span>(b))</span><br><span class="line"><span class="built_in">print</span>(a <span class="keyword">is</span> b)</span><br></pre></td></tr></table></figure>

<p>输出结果:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a,b = <span class="string">&quot;magic!&quot;</span>,<span class="string">&quot;magic!&quot;</span></span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(id(a),id(b))</span><br><span class="line">2114885691912 2114885691912</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(a is b)</span><br><span class="line">True</span><br></pre></td></tr></table></figure>

<p>example 05</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&quot;!&quot;</span></span><br><span class="line">b = <span class="string">&quot;!&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(a),<span class="built_in">id</span>(b))</span><br><span class="line"><span class="built_in">print</span>(a <span class="keyword">is</span> b)</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = <span class="string">&quot;!&quot;</span></span><br><span class="line">&gt;&gt;&gt; b = <span class="string">&quot;!&quot;</span></span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(id(a),id(b))</span><br><span class="line">140564571922024 140564571922024</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(a is b)</span><br><span class="line">True</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>example 06</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(a*<span class="number">20</span> <span class="keyword">is</span> <span class="string">&#x27;aaaaaaaaaaaaaaaaaaaa&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(a*<span class="number">21</span> <span class="keyword">is</span> <span class="string">&#x27;aaaaaaaaaaaaaaaaaaaaa&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>输出结果:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(a*20 is <span class="string">&#x27;aaaaaaaaaaaaaaaaaaaa&#x27;</span>)</span><br><span class="line">False</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(a*21 is <span class="string">&#x27;aaaaaaaaaaaaaaaaaaaaa&#x27;</span>)</span><br><span class="line">False</span><br></pre></td></tr></table></figure>

<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>通过上述 7 个例子,我们不难对 python 的字符串池化有个大概的认识,我们这里做个简单的总结:</p>
<ol>
<li>通过 example 00,01,05,我们可以得出对于长度为 0 或者 1 的字符串会被池化</li>
<li>通过 example 02,03,我们可以得出字符串中只包含字母数字以及下划线的字符串会被池化</li>
<li>通过 example 04, 我们可以得出当在同一行对不同变量，赋值如果相同的话，它们将会指向同一个对象，注意这里面的 “magic!” 并不符合池化的要求，这只是一种编译器的优化</li>
<li>example 06 所出现的现象在 python 中有一个专业的术语，讲常量折叠(constant folding),顾名思义，在编译优化时，讲能够计算出的结果的变量直接替换为常量.但是这没有限制吗？显然不是的，在我们的例子中已经发现，当长度超过20的时候，折叠就会失效了，试想一下，如果没有限制的话，初始化的字符串过长，将会严重导致性能的下降以及内存的消耗</li>
</ol>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ol>
<li><p><a target="_blank" rel="noopener" href="http://guilload.com/python-string-interning/">The internals of Python string interning</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://late.am/post/2012/03/26/exploring-python-code-objects.html">exploring python code objects</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/15541404/python-string-interning">Python string interning</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.laurentluce.com/posts/python-string-objects-implementation/">Python String objects implementation</a></p>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2018/12/21/%E8%A7%A3%E5%86%B3%20openpyxl%20%E5%9E%82%E7%9B%B4%E5%88%86%E9%A1%B5%E7%AC%A6%E5%92%8C%E6%B0%B4%E5%B9%B3%E5%88%86%E9%A1%B5%E7%AC%A6%E5%90%8C%E6%97%B6%E6%B7%BB%E5%8A%A0%E7%9A%84%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/12/21/%E8%A7%A3%E5%86%B3%20openpyxl%20%E5%9E%82%E7%9B%B4%E5%88%86%E9%A1%B5%E7%AC%A6%E5%92%8C%E6%B0%B4%E5%B9%B3%E5%88%86%E9%A1%B5%E7%AC%A6%E5%90%8C%E6%97%B6%E6%B7%BB%E5%8A%A0%E7%9A%84%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">解决 openpyxl 垂直分页符和水平分页符同时添加的问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-12-21 00:00:00" itemprop="dateCreated datePublished" datetime="2018-12-21T00:00:00+08:00">2018-12-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-12 15:04:10" itemprop="dateModified" datetime="2022-04-12T15:04:10+08:00">2022-04-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>十天前知乎上有人提问 <a target="_blank" rel="noopener" href="https://www.zhihu.com/question/305289263/answer/549313223">python:openpyxl模块怎么给表格添加分页符？实现分页打印功能？</a>,看到问题之后,我很快的给他了一个如何添加垂直分页符或水平分页符的示例,你以为问题就结束了?我是这么以为的,但是事实证明,我太天真了,就在我给出示例的几分钟后,他在我的回答下评论了,说是<strong>同时添加垂直分页符和水平分页符失败了</strong>.<br>我当时的第一反应:<br><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fyegeyuiomj30j60j63z8.jpg"><br>心里想着,肯定是他的写法有问题,毫不犹豫的回复到,” 没有试过同时添加两种分页符的操作,默认是水平分页符,如果你先添加了垂直分页符的话,应该后面需要重新声明:openpyxl.worksheet.pagebreak.PageBreak.tagname = “rowBreaks”,听着自己飞快击打键盘的声音,自己不经有点飘飘然.就在沉浸在自己的YY当中,又过去了几分钟,他用正确的代码错误的结果狠狠的摔在了我的脸上:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">col_break = openpyxl.worksheet.pagebreak.Break(<span class="number">5</span>) <span class="comment">#创建分页符，参数5：在第5/6中间分页</span></span><br><span class="line">sheet1.page_breaks.tagname = <span class="string">&#x27;rowBreaks&#x27;</span> <span class="comment">#分页符属性设置为行分页符</span></span><br><span class="line">sheet1.page_breaks.append(col_break) <span class="comment">#把分页符对象添加到sheet对象里</span></span><br><span class="line"></span><br><span class="line">row_break = openpyxl.worksheet.pagebreak.Break(<span class="number">3</span>) <span class="comment">#创建分页符</span></span><br><span class="line">sheet1.page_breaks.tagname = <span class="string">&#x27;colBreaks&#x27;</span> <span class="comment">#分页符属性设置为列分页符</span></span><br><span class="line">sheet1.page_breaks.append(row_break) <span class="comment">#把分页符对象添加到sheet对象里</span></span><br></pre></td></tr></table></figure>

<p>“结果是在第3和5列添加了两个垂直分页符，是哪里有问题？大师”,他问道.  我看了一眼代码好像没有错,我的心有点慌了,双手开始微微颤抖起来,一遍又一遍地仔细地巡视着代码,视图找出错误反驳他,但是并没有,抱着最后的希望,我把他的代码复制到自己的文件中,然后敲下回车符, excel 文件静静的生成在目录下,这可能是我最后的希望了.拿鼠标的手不自觉的颤抖起来,那么小的屏幕,那么大的文件,鼠标怎么半天都没办法移动上去,我深吸一口气,控制住自己手,终于把鼠标一上去了,双击excel,闭上眼睛,再睁开,我知道,我错了.但是就这么放弃了吗?绝不!我要把这个问题打到!</p>
<h1 id="亮剑"><a href="#亮剑" class="headerlink" title="亮剑"></a>亮剑</h1><blockquote>
<p>“是时候展示真正的技术了”</p>
</blockquote>
<p>俗话说”解铃还须系铃人”,我们还得自己看一下问题代码:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># example.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> Workbook</span><br><span class="line"><span class="keyword">from</span> openpyxl.compat <span class="keyword">import</span> <span class="built_in">range</span></span><br><span class="line"><span class="keyword">from</span> openpyxl.utils <span class="keyword">import</span> get_column_letter</span><br><span class="line"><span class="keyword">from</span> openpyxl.worksheet.pagebreak <span class="keyword">import</span> Break, PageBreak</span><br><span class="line"></span><br><span class="line">wb = Workbook()</span><br><span class="line">ws = wb.active</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">20</span>):</span><br><span class="line">    <span class="keyword">for</span> col <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">30</span>):</span><br><span class="line">        _ = ws.cell(column=col, row=row, value=<span class="string">&quot;&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(get_column_letter(col)))</span><br><span class="line"></span><br><span class="line">col_break = Break(<span class="number">5</span>) <span class="comment">#创建分页符，参数5：在第5/6中间分页</span></span><br><span class="line">ws.page_breaks.tagname = <span class="string">&#x27;rowBreaks&#x27;</span> <span class="comment">#分页符属性设置为行分页符</span></span><br><span class="line">ws.page_breaks.append(col_break) <span class="comment">#把分页符对象添加到sheet对象里</span></span><br><span class="line"></span><br><span class="line">row_break = Break(<span class="number">3</span>) <span class="comment">#创建分页符</span></span><br><span class="line">ws.page_breaks.tagname = <span class="string">&#x27;colBreaks&#x27;</span> <span class="comment">#分页符属性设置为列分页符</span></span><br><span class="line">ws.page_breaks.append(row_break) <span class="comment">#把分页符对象添加到sheet对象里</span></span><br><span class="line"></span><br><span class="line">wb.save(filename = dest_filename) </span><br></pre></td></tr></table></figure>


<p>从代码上应该是后面的 page_breaks 把前面的覆盖了, 那让我们看看 page_breaks 究竟是什么东西.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Worksheet</span>(<span class="params">_WorkbookChild</span>):</span></span><br><span class="line">   <span class="comment"># 省略部分代码</span></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">_setup</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.page_breaks = PageBreak() <span class="comment"># 再看 PageBreak</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PageBreak</span>(<span class="params">Serialisable</span>):</span></span><br><span class="line">    tagname = <span class="string">&quot;rowBreaks&quot;</span></span><br><span class="line">    <span class="comment"># 省略部分代码</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">append</span>(<span class="params">self, brk=<span class="literal">None</span></span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Add a page break</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        vals = <span class="built_in">list</span>(self.brk)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(brk, Break):</span><br><span class="line">            brk = Break(<span class="built_in">id</span>=self.count+<span class="number">1</span>)</span><br><span class="line">        vals.append(brk)</span><br><span class="line">        self.brk = vals</span><br></pre></td></tr></table></figure>

<p>从 example 中我们不难发现,我们是通过修改 page_breaks 的 tag_name 去决定插入的分页符是垂直分页符还是水平分页符的.但是 page_breaks 现在只有一个 PageBreak 这就难怪后声明的会把前面的覆盖了,那么如果我们把 page_breaks 变成 PageBreak 的列表呢?</p>
<h1 id="First-Blood-–-page-breaks"><a href="#First-Blood-–-page-breaks" class="headerlink" title="First Blood – page_breaks"></a>First Blood – page_breaks</h1><p>说改咱就改啊,首先尝试修改 WorkSheet 类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Worksheet</span>(<span class="params">_WorkbookChild</span>):</span></span><br><span class="line">   <span class="comment"># 省略部分代码</span></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">_setup</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.page_breaks = [PageBreak()]</span><br></pre></td></tr></table></figure>

<p>然后再修改一下 example.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> Workbook</span><br><span class="line"><span class="keyword">from</span> openpyxl.compat <span class="keyword">import</span> <span class="built_in">range</span></span><br><span class="line"><span class="keyword">from</span> openpyxl.utils <span class="keyword">import</span> get_column_letter</span><br><span class="line"><span class="keyword">from</span> openpyxl.worksheet.pagebreak <span class="keyword">import</span> Break, PageBreak</span><br><span class="line"></span><br><span class="line">wb = Workbook()</span><br><span class="line">dest_filename = <span class="string">&#x27;empty_book.xlsx&#x27;</span></span><br><span class="line"></span><br><span class="line">ws = wb.active</span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">20</span>):</span><br><span class="line">    <span class="keyword">for</span> col <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">30</span>):</span><br><span class="line">        _ = ws.cell(column=col, row=row, value=<span class="string">&quot;&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(get_column_letter(col)))</span><br><span class="line"></span><br><span class="line">rowPageBreak = PageBreak()</span><br><span class="line">rowPageBreak.tagname = <span class="string">&#x27;rowBreaks&#x27;</span></span><br><span class="line"></span><br><span class="line">colPageBreak = PageBreak()</span><br><span class="line">colPageBreak.tagname = <span class="string">&#x27;colBreaks&#x27;</span></span><br><span class="line"></span><br><span class="line">ws.page_breaks = [rowPageBreak, colPageBreak] </span><br><span class="line"></span><br><span class="line">ws.page_breaks[<span class="number">0</span>].append(Break(<span class="built_in">id</span>=<span class="number">5</span>))  </span><br><span class="line">ws.page_breaks[<span class="number">1</span>].append(Break(<span class="built_in">id</span>=<span class="number">3</span>))</span><br><span class="line">wb.save(filename = dest_filename)</span><br></pre></td></tr></table></figure>

<p>敲下回车,心里那个美滋滋,还没高兴几秒钟,就出问题了,果然做人还是得低调一点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;test.py&quot;, line 24, in &lt;module&gt;</span><br><span class="line">    wb.save(filename = dest_filename)</span><br><span class="line">  File &quot;F:\workspace\python\test_openpyxl\test_openpyxl\lib\site-packages\openpyxl\workbook\workbook.py&quot;, line 391, in save</span><br><span class="line">    save_workbook(self, filename)</span><br><span class="line">  File &quot;F:\workspace\python\test_openpyxl\test_openpyxl\lib\site-packages\openpyxl\writer\excel.py&quot;, line 284, in save_workbook</span><br><span class="line">    writer.save(filename)</span><br><span class="line">  File &quot;F:\workspace\python\test_openpyxl\test_openpyxl\lib\site-packages\openpyxl\writer\excel.py&quot;, line 266, in save</span><br><span class="line">    self.write_data()</span><br><span class="line">  File &quot;F:\workspace\python\test_openpyxl\test_openpyxl\lib\site-packages\openpyxl\writer\excel.py&quot;, line 83, in write_data</span><br><span class="line">    self._write_worksheets()</span><br><span class="line">  File &quot;F:\workspace\python\test_openpyxl\test_openpyxl\lib\site-packages\openpyxl\writer\excel.py&quot;, line 203, in _write_worksheets</span><br><span class="line">    xml = ws._write()</span><br><span class="line">  File &quot;F:\workspace\python\test_openpyxl\test_openpyxl\lib\site-packages\openpyxl\worksheet\worksheet.py&quot;, line 893, in _write</span><br><span class="line">    return write_worksheet(self)</span><br><span class="line">  File &quot;F:\workspace\python\test_openpyxl\test_openpyxl\lib\site-packages\openpyxl\writer\worksheet.py&quot;, line 151, in write_worksheet</span><br><span class="line">    xf.write(ws.page_breaks.to_tree())</span><br><span class="line">AttributeError: &#x27;list&#x27; object has no attribute &#x27;to_tree&#x27;</span><br></pre></td></tr></table></figure>

<p>看了一眼错误信息,发现了从中作祟的家伙再 worksheet.py 的 151 行, 让我们悄悄地看一眼,打枪的不要.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># worksheet.py</span></span><br><span class="line"><span class="comment"># 省略部分代码</span></span><br><span class="line">            <span class="keyword">if</span> ws.page_breaks:</span><br><span class="line">                    xf.write(ws.page_breaks.to_tree())</span><br></pre></td></tr></table></figure>

<p>原来是我们修改了 page_breaks 之后, page_breaks 有时候不再是孤家寡人了,我们需要考虑它有另外的 PageBreak 的情况了.</p>
<h1 id="Double-Kill-–-Worksheet"><a href="#Double-Kill-–-Worksheet" class="headerlink" title="Double Kill – Worksheet"></a>Double Kill – Worksheet</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># worksheet.py</span></span><br><span class="line"><span class="comment"># 省略部分代码</span></span><br><span class="line">            <span class="keyword">if</span> ws.page_breaks:</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">isinstance</span>(ws.page_breaks,<span class="built_in">list</span>):</span><br><span class="line">                    <span class="keyword">for</span> page_break_item <span class="keyword">in</span> ws.page_breaks:</span><br><span class="line">                        xf.write(page_break_item.to_tree())</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    xf.write(ws.page_breaks.to_tree())</span><br></pre></td></tr></table></figure>
<p>回车,毫无问题,人生啊就是这么寂寞如雪~~~</p>
<h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>已经在 openpyxl 提了相应的issue,目前再写测试用例,过段时间就提交 PR 了</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2018/12/16/Flask%20Web%20%E5%BC%80%E5%8F%91%20--%20%E5%BC%80%E5%8F%91%E5%8D%9A%E5%AE%A2%E5%BA%94%E7%94%A8%20--%20%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%20%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/12/16/Flask%20Web%20%E5%BC%80%E5%8F%91%20--%20%E5%BC%80%E5%8F%91%E5%8D%9A%E5%AE%A2%E5%BA%94%E7%94%A8%20--%20%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%20%E5%AE%89%E8%A3%85/" class="post-title-link" itemprop="url">Flask Web 开发 -- 开发博客应用 -- 第一部分 安装</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-12-16 00:00:00" itemprop="dateCreated datePublished" datetime="2018-12-16T00:00:00+08:00">2018-12-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-12 15:04:10" itemprop="dateModified" datetime="2022-04-12T15:04:10+08:00">2022-04-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><p>该项目在 Ubuntu16.04 平台下开发,基于 Flask 版本 1.0.2, 项目基本完成,现已开源,源码地址 : <a target="_blank" rel="noopener" href="https://github.com/lt94/peach-blog.git">peach-blog</a>, 网站实际运行效果: <a target="_blank" rel="noopener" href="http://www.leetao94.cn/">Leetao’s Blog</a></p>
<h1 id="环境的搭建"><a href="#环境的搭建" class="headerlink" title="环境的搭建"></a>环境的搭建</h1><blockquote>
<p>本项目中的项目代码基于 Python 3.6 | 3.5 开发完成,建议使用以上两个版本</p>
</blockquote>
<h2 id="1-1-使用虚拟环境"><a href="#1-1-使用虚拟环境" class="headerlink" title="1.1 使用虚拟环境"></a>1.1 使用虚拟环境</h2><p>关于为什么使用虚拟环境,可以参考很久之前我写的一篇文章 <a target="_blank" rel="noopener" href="http://www.leetao94.cn/post/16">为什么使用virtualenv</a>, 尽管我们接下来使用 virtualenv ,但是终究也是虚拟环境,其核心思想还是不变的: 可以避免各个项目环境的包的混乱和版本冲突,保持项目 python 环境干净,便于后期别人维护以及项目迁移.</p>
<p>由于我们使用的是 python3.+,其自带了 venv, 可以创建虚拟环境, 对于 Ubuntu 则需要通过下述命令手动安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install python3-venv</span><br></pre></td></tr></table></figure>

<p>准备工作做好之后,我们需要创建一个文件夹 peach-blog</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir peach-blog</span><br></pre></td></tr></table></figure>

<p>windows 下的文件夹的创建这里就不多说了. </p>
<p>下一步是使用 venv 在 peach-blog 文件中创建虚拟环境,这个命令和 virtualenv 类似,同样需要一个必须的参数,就是虚拟环境的名字,创建虚拟环境成功中,当前文件夹会出现一个子文件夹,名字就是上述命令中指定的参数, 与虚拟环境相关的文件都保存在这个文件夹中,个人习惯喜欢把虚拟环境命名为 env</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m venv env</span><br></pre></td></tr></table></figure>

<p>如果是 windows 下,默认安装的是 python3.5+ 的话,创建命令是:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m venv env # 确保 python 路径被添加到环境变量中</span><br></pre></td></tr></table></figure>

<p>现在在 peach-blog 文件夹下有一个名为 env 的子文件夹, 它里面保存了一个全新的 python 环境 (与 windows 下不同的是, windows 下 env 中还有 Python 的二进制文件), 需要使用这个虚拟环境的话,再次之前我们首先需要激活它,可以通过下述命令激活:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source env/bin/activate</span><br></pre></td></tr></table></figure>

<p>在 windows 下激活命令如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">env\Script\activate</span><br></pre></td></tr></table></figure>

<p>虚拟环境激活后,其命令行会出现虚拟环境的名称,提示你已经激活环境成功</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(env) $</span><br></pre></td></tr></table></figure>

<p>当我们不想使用虚拟环境的时候,我们可以通过 deactivate 这个命令退出当前的虚拟环境.</p>
<h2 id="1-2-使用-pip-安装项目开发必须的包"><a href="#1-2-使用-pip-安装项目开发必须的包" class="headerlink" title="1.2 使用 pip 安装项目开发必须的包"></a>1.2 使用 pip 安装项目开发必须的包</h2><p>大多数 Python 包都使用 pip 工具安装，在我们创建虚拟环境后, 其环境中已经包含 pip. 激活虚拟环境后，pip 就可以正常的使用了.</p>
<p>由于项目最终使用的依赖包比较多,但是在项目初期,我们并不需将其全部安装,我们可以先安装下述 Python 包:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Flask</span><br><span class="line">Flask-sqlalchemy</span><br><span class="line">Flask-migrate</span><br><span class="line">Flask-bootstrap</span><br><span class="line">Flask-wtf</span><br></pre></td></tr></table></figure>

<p>执行下述命令在虚拟环境中安装上述包:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(env) $ pip install flask flask-sqlalchemy flask-migrate flask-bootstrap flask-wtf</span><br></pre></td></tr></table></figure>

<p>如果没有报错的话,基本上说明已经正确的安装这些包了.在下次的教程中就可以尝试搭建其项目的最初的框架了.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2018/12/14/list1%20+=%20list2%20%E5%92%8C%20list1=%20list1%20+%20list2%20%E7%9A%84%E6%95%85%E4%BA%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2018/12/14/list1%20+=%20list2%20%E5%92%8C%20list1=%20list1%20+%20list2%20%E7%9A%84%E6%95%85%E4%BA%8B/" class="post-title-link" itemprop="url">list1 += list2 和 list1= list1 + list2 的故事</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-12-14 00:00:00" itemprop="dateCreated datePublished" datetime="2018-12-14T00:00:00+08:00">2018-12-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-12 15:04:10" itemprop="dateModified" datetime="2022-04-12T15:04:10+08:00">2022-04-12</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>前几天在某乎上有人问问题,问道 list.append(ele) 和 list = list + [ele] 一样吗? 这个问题的答案自然是不一样的,这里就不过多描述了.重要的是,借由这个问题,我产生了一个新的问题: <strong>list1 += list2 和 list1= list1 + list2  这两者有区别吗</strong> 先说结论,自然是有区别的.</p>
<h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><p>花一分钟看个两个例子,如果你能正确的知道输出结果,那么这篇文章最重要的部分你已经掌握了,可以没有必要通读全文了.</p>
<h2 id="Example00"><a href="#Example00" class="headerlink" title="Example00"></a>Example00</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">list2 = list1</span><br><span class="line">list1 += [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(list1)</span><br><span class="line"><span class="built_in">print</span>(list2)</span><br></pre></td></tr></table></figure>

<h2 id="Example01"><a href="#Example01" class="headerlink" title="Example01"></a>Example01</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] </span><br><span class="line">list2 = list1 </span><br><span class="line">list1 = list1 + [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>] </span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(list1) </span><br><span class="line"><span class="built_in">print</span>(list2) </span><br></pre></td></tr></table></figure>

<h1 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h1><p>让我们看一下这两个例子的输出</p>
<h2 id="Example00-1"><a href="#Example00-1" class="headerlink" title="Example00"></a>Example00</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[1, 2, 3, 4, 5, 6]</span><br><span class="line">[1, 2, 3, 4, 5, 6]</span><br></pre></td></tr></table></figure>

<h2 id="Example01-1"><a href="#Example01-1" class="headerlink" title="Example01"></a>Example01</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[1, 2, 3, 4, 5, 6]</span><br><span class="line">[1, 2, 3]</span><br></pre></td></tr></table></figure>

<h1 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h1><p>你可以将 “+=” 看作 extend, 它在原有的 list 基础上进行元素的拓充, 而 list = list + [ele] 则是,重新创建了一个 list 然后将原来的 list 和新添加的元素添加进去.为了帮助理解,我画了两张动图:</p>
<p><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fy42h5v76ng30hs0dcwh9.gif"><br><img src="http://ww1.sinaimg.cn/large/006wYWbGly1fy42hm5oj5g30hs0dcq6t.gif"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Leetao</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"leetaoGoooo","repo":"leetaogoooo.github.io","client_id":"bf98ffa3f57b2591544e","client_secret":"cc5ffeff8863bb5c44ed10f024513dccfac14afa","admin_user":"leetaogoooo","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":null,"js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"823cd2c5daa018d5e8843493c15fc938"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
