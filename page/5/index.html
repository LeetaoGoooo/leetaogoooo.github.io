<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 5.4.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"leetaogoooo.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.9.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="Je pense, donc je suis">
<meta property="og:type" content="website">
<meta property="og:title" content="Leetao&#39;s Blog">
<meta property="og:url" content="https://leetaogoooo.github.io/page/5/">
<meta property="og:site_name" content="Leetao&#39;s Blog">
<meta property="og:description" content="Je pense, donc je suis">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Leetao">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://leetaogoooo.github.io/page/5/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/5/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Leetao's Blog</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Leetao's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Leetao's Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Talk is cheap, show me the code</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Leetao"
      src="/images/avatar.ico">
  <p class="site-author-name" itemprop="name">Leetao</p>
  <div class="site-description" itemprop="description">Je pense, donc je suis</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">192</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">74</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/leetaogoooo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;leetaogoooo" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:leetao94cn@gmail.com" title="E-Mail → mailto:leetao94cn@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/LeetaoGoooo" title="Zhihu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;LeetaoGoooo" rel="noopener" target="_blank"><i class="fab fa-zhihu fa-fw"></i>Zhihu</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/leetaoGoooo" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;leetaoGoooo" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i>RSS</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2020/05/23/Flask-SQLAlchemy%20%E5%A4%9A%E8%A1%A8%E5%AF%B9%E5%8D%95%E6%A8%A1%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/05/23/Flask-SQLAlchemy%20%E5%A4%9A%E8%A1%A8%E5%AF%B9%E5%8D%95%E6%A8%A1%E5%9E%8B/" class="post-title-link" itemprop="url">Flask-SQLAlchemy 多表对单模型</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-05-23 00:00:00" itemprop="dateCreated datePublished" datetime="2020-05-23T00:00:00+08:00">2020-05-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-17 20:06:27" itemprop="dateModified" datetime="2022-04-17T20:06:27+08:00">2022-04-17</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在 Flask 中 Flask-SQLAlchemy 应该是最常用的 ORM 了，通过它来构建 Model  来映射数据库中的表。通常情况下都是一个表对应一个模型，这种方案很简单。那么如果是多个表对应一个模型的情况下，该如何处理呢？接下来结合一个具体的案例来讲解这一内容。</p>
<h1 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h1><p>现在我有一个数据库 <strong>test.db</strong>,它的表如下：</p>
<p><img src="http://ww1.sinaimg.cn/large/006wYWbGly1gf74p3v35jj30cc0eg0uy.jpg" alt="1590195419952-4200c916-62c2-4f6e-9c1b-d79859502926.png"></p>
<p>有很多表并且表名类似，而且表名类似的表的结构相同，以 <strong>UPS1_20190716</strong> 为例，看一下它的表结构：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Id</span><br><span class="line">workTime</span><br><span class="line">device</span><br><span class="line">status</span><br><span class="line">temp</span><br></pre></td></tr></table></figure>

<p>那么如何定义Model呢？像下面这样？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UPS120190719</span>:</span></span><br><span class="line">	__tablename__ = <span class="string">&#x27;UPS1_20190716&#x27;</span></span><br><span class="line">	Id = db.Column(db.Integer,primary_key=<span class="literal">True</span>)</span><br><span class="line">	workTime = db.Column(db.Time)</span><br><span class="line">	...</span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UPS220190716</span>:</span></span><br><span class="line">	__tablename__ = <span class="string">&#x27;UPS2_20190716&#x27;</span></span><br><span class="line">	...</span><br></pre></td></tr></table></figure>

<p>显然这样子代码不够优雅，有重复的代码，需要优化。那么该怎么解决呢？</p>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>有俩种方案都可以解决上述问题，不过俩种方案应用场景略有不同，可以根据实际情况来决定。</p>
<h2 id="类的继承"><a href="#类的继承" class="headerlink" title="类的继承"></a>类的继承</h2><p>第一种方法就是利用类可以继承的特性去实现了，我们定义一个表的基类,然后其它 UPS 表继承 UpsBase即可：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UpsBase</span>:</span></span><br><span class="line">	Id = db.Column(db.Integer,primary_key=<span class="literal">True</span>)</span><br><span class="line">   	workTime = db.Column(db.Time)</span><br><span class="line">   	...</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UPS120190716</span>(<span class="params">UpsBase</span>):</span></span><br><span class="line">	__tablename__ = <span class="string">&#x27;UPS1_20190716&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UPS220190716</span>(<span class="params">UpsBase</span>):</span></span><br><span class="line">	__tablename__ = <span class="string">&#x27;UPS2_20190716&#x27;</span></span><br></pre></td></tr></table></figure>



<p>当表的数量固定这是一个很好的解决方案，但是一旦当数据库的表会发生变动，比如隔天增长几张表，显然我们不太可能天天定义新的<code>Model</code>，然后重新部署服务的。这个情况就需要用到第二种解决方案了。</p>
<h2 id="动态定义表类"><a href="#动态定义表类" class="headerlink" title="动态定义表类"></a>动态定义表类</h2><p>同样的这种方法也需要首先定义表的基类：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UpsBase</span>:</span></span><br><span class="line">   Id = db.Column(db.Integer,primary_key=<span class="literal">True</span>)</span><br><span class="line">   workTime = db.Column(db.Time)</span><br><span class="line">   ...</span><br></pre></td></tr></table></figure>

<p>但是这里就不需要定义其它 UPS 表的类了，这里是动态定义，那就意味着，我们只在需要的时候创建，那么如何创建呢？在 Python 中可以使用 type 函数动态创建类，需要注意的时，在创建时需要设置 **<strong>tablename</strong> **的值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ups1_20190716 = <span class="built_in">type</span>(<span class="string">&#x27;UPS120190716&#x27;</span>, (UpsBase, db.Model), &#123;<span class="string">&#x27;__tablename__&#x27;</span>:<span class="string">&#x27;UPS1_20190716&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>

<p>之后就可以创建实例了：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ups = Ups1_20190716()</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2020/05/20/Windows%E4%B8%8B%E4%BD%BF%E7%94%A8Anaconda%E5%AF%BC%E5%85%A5sqlite3%E5%BC%82%E5%B8%B8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/05/20/Windows%E4%B8%8B%E4%BD%BF%E7%94%A8Anaconda%E5%AF%BC%E5%85%A5sqlite3%E5%BC%82%E5%B8%B8/" class="post-title-link" itemprop="url">Windows下使用Anaconda导入sqlite3异常</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-05-20 00:00:00" itemprop="dateCreated datePublished" datetime="2020-05-20T00:00:00+08:00">2020-05-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-17 20:06:27" itemprop="dateModified" datetime="2022-04-17T20:06:27+08:00">2022-04-17</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>最近在使用 Anaconda 自带的 Python 环境，在交互模式下 <code>import sqlite3</code> 出现异常，异常信息如下:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;console&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">  File &quot;c:\programdata\anaconda3\lib\sqlite3\__init__.py&quot;, line 23, in &lt;module&gt;</span><br><span class="line">    from sqlite3.dbapi2 import *</span><br><span class="line">  File &quot;c:\programdata\anaconda3\lib\sqlite3\dbapi2.py&quot;, line 27, in &lt;module&gt;</span><br><span class="line">    from _sqlite3 import *</span><br><span class="line">ImportError: DLL load failed: The specified module could not be found.</span><br></pre></td></tr></table></figure>
<h1 id="错误原因"><a href="#错误原因" class="headerlink" title="错误原因"></a>错误原因</h1><p>从报错信息来看，错误原因很明显找不到对应的 <code>dll</code>，我也查阅了相关资料，得出了下面的俩种解决方案</p>
<h2 id="解决方案一"><a href="#解决方案一" class="headerlink" title="解决方案一"></a>解决方案一</h2><p>下载对应的 <code>dll</code>，其实只需要下载一个 <code>sqlite3.dll</code>,下载地址 <a target="_blank" rel="noopener" href="https://sqlite.org/download.html">sqlite3.dll</a>,根据系统位数下载对应的<code>dll</code>，然后将下载好的文件放在 Anaconda 默认的 Python.exe 所在的目录。</p>
<h2 id="解决方案二"><a href="#解决方案二" class="headerlink" title="解决方案二"></a>解决方案二</h2><p>后来我检索了一下 Anaconda 的安装目录发现所需要的 <code>dll</code> 已经存在了，但是因为没有添加到 <code>PATH</code> 中所以没有检索出来，因此第二个解决办法就是将 <code>path\to\Anaconda3\Library\bin</code> 添加到 <code>PATH</code> 中，然后重新打开终端就可以解决问题了。</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/54876404/unable-to-import-sqlite3-using-anaconda-python">Unable to import sqlite3 using Anaconda Python</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2020/05/07/Leetcode-572%20%E5%8F%A6%E4%B8%80%E4%B8%AA%E6%A0%91%E7%9A%84%E5%AD%90%E6%A0%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/05/07/Leetcode-572%20%E5%8F%A6%E4%B8%80%E4%B8%AA%E6%A0%91%E7%9A%84%E5%AD%90%E6%A0%91/" class="post-title-link" itemprop="url">Leetcode-572 另一个树的子树</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-05-07 00:00:00" itemprop="dateCreated datePublished" datetime="2020-05-07T00:00:00+08:00">2020-05-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-17 20:06:27" itemprop="dateModified" datetime="2022-04-17T20:06:27+08:00">2022-04-17</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>给定两个非空二叉树 s 和 t，检验 s 中是否包含和 t 具有相同结构和节点值的子树。s 的一个子树包括 s 的一个节点和这个节点的所有子孙。s 也可以看做它自身的一棵子树。</p>
<p>示例 1:<br>给定的树 s:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">    3</span><br><span class="line">   / \</span><br><span class="line">  4   5</span><br><span class="line"> / \</span><br><span class="line">1   2</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>给定的树 t：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  4 </span><br><span class="line"> / \</span><br><span class="line">1   2</span><br></pre></td></tr></table></figure>

<p>返回 true，因为 t 与 s 的一个子树拥有相同的结构和节点值。</p>
<p>示例 2:<br>给定的树 s：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    3</span><br><span class="line">   / \</span><br><span class="line">  4   5</span><br><span class="line"> / \</span><br><span class="line">1   2</span><br><span class="line">   /</span><br><span class="line">  0</span><br></pre></td></tr></table></figure>

<p>给定的树 t：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  4</span><br><span class="line"> / \</span><br><span class="line">1   2</span><br></pre></td></tr></table></figure>

<p>返回 false。</p>
<h1 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h1><p>这题是让我们判断一个树是否是另外一个树的子树，从题目的一开始<strong>s 的一个子树包括 s 的一个节点和这个节点的所有子孙</strong>结合第二个例子不难发现，中间的某个部分不能算是子树。那么就相当于<strong>需要判断s的所有子树中是否和t有一样的</strong>，最后就演变成<strong>判断两个树是否相等了</strong>。判断俩个树是否相等，可以用递归的写法。</p>
<h2 id="判断两个树是否相等"><a href="#判断两个树是否相等" class="headerlink" title="判断两个树是否相等"></a>判断两个树是否相等</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isSameTree</span>(<span class="params">s: TreeNode, t: TreeNode</span>) -&gt; <span class="built_in">bool</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> s <span class="keyword">and</span> <span class="keyword">not</span> t:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> s <span class="keyword">or</span> <span class="keyword">not</span> t:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">if</span> s.val != t.val:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> isSameTree(s.left,t.left) <span class="keyword">and</span> isSameTree(s.right,t.right)</span><br></pre></td></tr></table></figure>


<h1 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode:</span></span><br><span class="line"><span class="comment">#     def __init__(self, val=0, left=None, right=None):</span></span><br><span class="line"><span class="comment">#         self.val = val</span></span><br><span class="line"><span class="comment">#         self.left = left</span></span><br><span class="line"><span class="comment">#         self.right = right</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isSubtree</span>(<span class="params">self, s: TreeNode, t: TreeNode</span>) -&gt; <span class="built_in">bool</span>:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">isSameTree</span>(<span class="params">s: TreeNode, t: TreeNode</span>) -&gt; <span class="built_in">bool</span>:</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> s <span class="keyword">and</span> <span class="keyword">not</span> t:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> s <span class="keyword">or</span> <span class="keyword">not</span> t:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">if</span> s.val != t.val:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">return</span> isSameTree(s.left,t.left) <span class="keyword">and</span> isSameTree(s.right,t.right)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> s:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">if</span> isSameTree(s,t):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> self.isSubtree(s.left,t) <span class="keyword">or</span> self.isSubtree(s.right,t)</span><br></pre></td></tr></table></figure>


<h1 id="开放思路"><a href="#开放思路" class="headerlink" title="开放思路"></a>开放思路</h1><p>如果我们把两个树的所有节点值都保存到两个字符串 s’ 和 t’ 中，然后判断是否 t’ 在 s’ 中就能得出 t 是否是 s 的子树了？</p>
<p>答案是肯定的，有兴趣的可以按照这个思路去实践一下。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2020/05/05/%E5%9B%9B%E6%9C%88%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E3%80%8A%E7%88%B1%E6%83%85%E7%AC%94%E8%AE%B0%E3%80%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/05/05/%E5%9B%9B%E6%9C%88%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0-%E3%80%8A%E7%88%B1%E6%83%85%E7%AC%94%E8%AE%B0%E3%80%8B/" class="post-title-link" itemprop="url">四月读书笔记-《爱情笔记》</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-05-05 00:00:00" itemprop="dateCreated datePublished" datetime="2020-05-05T00:00:00+08:00">2020-05-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-17 20:06:27" itemprop="dateModified" datetime="2022-04-17T20:06:27+08:00">2022-04-17</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="导言"><a href="#导言" class="headerlink" title="导言"></a>导言</h1><p>这是原本计划在四月读的第一本书，最后拖延到五一假期的第四天才把它读完，这是今年的第5本书。</p>
<h1 id="个人感想"><a href="#个人感想" class="headerlink" title="个人感想"></a>个人感想</h1><p>老实说，这本书我不怎么喜欢，从读小说的开篇的故事开始就不喜欢。可能故事的男主人公的是外国人，其性格特点和我大相径庭吧，他和故事的女主在一次飞机上邂逅，按照他的意思来说，就立马坠入了爱河。他的爱情就如同杰伦的歌词那样，“爱情来的太快就像龙卷风”。龙卷风来的快，去的也快，他也一样，像所有刚恋爱的人的一样，他和女主度过了几个月的甜蜜时光，然后冲突开始产生、升级接着分道扬镳，然后分手后过渡期的一系列消极行为到末尾的醒悟。冷静之后，将整段情感经历写下来进行<strong>辩证性的思考</strong>。</p>
<p>可能最让我觉得不喜欢的就是对感情进行理性的思考吧。本来感情就不是理性的产物，不然也不会有情不知所起，一往而深。什么东西都去追根究底，感觉生活中就会少了很多乐趣。</p>
<h1 id="推荐指数"><a href="#推荐指数" class="headerlink" title="推荐指数"></a>推荐指数</h1><p>三颗星</p>
<h1 id="内容简介"><a href="#内容简介" class="headerlink" title="内容简介"></a>内容简介</h1><p>这是一部逼使理性与感性、细腻生动的恋爱过程全记录。</p>
<p>其间，才子德波顿细述一段情缘中的邂逅、迷恋、平凡中的幸福、熟悉后的倦怠、女友移情别恋、挽回无望、自杀、醒悟，以至一段情完全成为过去。他认真思辩自己的感觉，忠实记下与女友交往中的各个细节，特别是心理和哲学层面的思考，文字生动、处处机锋，不仅有极大的阅读乐趣，阅毕更令人回味无穷。</p>
<p>来吧，想爱、正在爱、曾经爱过的读者诸君，来看看“我”谈的那场恋爱是怎么回事。</p>
<p>英伦才子阿兰·德波顿，一位不乏米兰·昆德拉的批评深度，深具罗兰·巴特尔的解构气质；但，比昆德拉有更立体的爱情思维，比巴特尔更熨贴恋人的爱情神经，激活人们全新的阅读体验。 本书是一部融合理性与感性，细腻生动的恋爱过程的全记录。忠实记下与女友交往中的各个细节，特别是心理和哲学层面的思考 ，文字生动，处处机锋，不仅有极大的阅读乐趣，阅毕更令人回味无穷。</p>
<h1 id="摘录"><a href="#摘录" class="headerlink" title="摘录"></a>摘录</h1><ol>
<li><p>在我看来，她对情人的看法可比作是紧身的套装，而我认为真实的自我却很肥胖，所以，那整个晚上似乎都是一个胖男人在努力想让一套太小的衣服显得合身。我得拼命把多余的赘肉塞进不合身的衣服里，紧缩腰身，屏住呼吸，防止衣料撕裂。如果我的动作不如往常反应自如，那么一点都不奇怪，一个被过瘦衣服缠身的胖男人如何能反应自如？他太害怕衣服裂开，不得不一动不动地坐在那儿，屏住呼吸，祷告上天保佑这个夜晚不出大祸，平安度过。爱情已让我瘫痪。</p>
</li>
<li><p>但是为了被爱而说谎，则包含了更有违常情的假设：如果我不说谎，我就不会被爱。这是一种态度，认为要富有魅力就得消除所有个性（因此也可能会事与愿违），认为真正的自我不可避免地会与心上人的完美发生冲突（因而配不上心上人的完美）。</p>
</li>
<li><p>吸引是一种表演行为，是从自发的行为向符合观众要求的行为的转变。</p>
</li>
<li><p>目标的实现，往往是因为偶然性，而非来自事先算计。</p>
</li>
<li><p>只有当人们知道自己是另一个人的所爱时，才会既欣喜若狂又惊恐不安。如果完全没有认识到自己值得爱恋，那么接受他人爱情时的感受，与被授予了巨大的荣誉却不知这荣誉的凭借没什么两样。</p>
</li>
<li><p>在绝大多数的男女关系中，通常都会有马克斯主义的思维（当爱明显得到回应时），这种思维的解决得借助自我喜爱和自我痛恨之间的平衡。如果自我痛恨占了上风，那么接受爱的一方就会断言心上人（有各种各样的理由）不适合自己（因为和坏东西有了联系）；如果自我喜爱占了上风，那么双方都会接受这样一种看法：爱得到回应不是因为心上人低贱，而是自己原本值得爱恋。</p>
</li>
<li><p>爱情是一个孤独的追求，爱情至多只能为另一个人——被爱的人——所理解。</p>
</li>
<li><p>两个人越是熟悉，他们在一起使用的语言就越会脱离常用的、词典里的释义。熟悉会创造出一种全新的语言，一种亲密的室内语，有关他们共同的故事，不易为他人理解。这语言凝结了他们共同的经历，包含了关系进展的过程，使得与心上人谈话有异于跟他人交谈。</p>
</li>
<li><p>我们只注意到感情在继续，却没有意识到在我们的关系中并没有什么是不可以破坏的。</p>
</li>
<li><p>我们想验证彼此忍受的限度：只有当我们徒劳地尝试过摧毁对方，我们才知道自己是安全的。</p>
</li>
<li><p>人生气的时候是一个复杂的动物，发出极度矛盾的信息，哀求着救助与关注，然而当这一切到来时，却又拒绝，希望无须言语就可以得到理解。</p>
</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2020/04/14/Pymysql%20error-%20cryptography%20is%20required%20for%20sha256_password%20or%20caching_sha2_password/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/04/14/Pymysql%20error-%20cryptography%20is%20required%20for%20sha256_password%20or%20caching_sha2_password/" class="post-title-link" itemprop="url">Pymysql error- cryptography is required for sha256_password or caching_sha2_password</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-04-14 00:00:00" itemprop="dateCreated datePublished" datetime="2020-04-14T00:00:00+08:00">2020-04-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-17 20:06:27" itemprop="dateModified" datetime="2022-04-17T20:06:27+08:00">2022-04-17</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>重新安装了 Docker，然后启动其中的 MySQL 镜像，通过 pymysql 去连接数据库，出现了下面错误:</p>
<blockquote>
<p>cryptography is required for sha256_password or caching_sha2_password</p>
</blockquote>
<h1 id="解决方法1"><a href="#解决方法1" class="headerlink" title="解决方法1"></a>解决方法1</h1><p>解决方法其实很简答，安装 <code>cryptography</code> 这个库就可以解决问题了。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install cryptography</span><br></pre></td></tr></table></figure>

<h1 id="出现问题的原因"><a href="#出现问题的原因" class="headerlink" title="出现问题的原因"></a>出现问题的原因</h1><p>但是为什么会出现这个问题呢？然后查阅了一下 MySQL 的相关资料发现，MySQL8.0会默认使用<code>caching_sha2_password</code>作为身份验证插件,这个也就是导致出错的原因。这就意味着，我们也可以通过关闭 <code>caching_sha2_password</code> 这个插件解决问题。</p>
<h1 id="解决方法2"><a href="#解决方法2" class="headerlink" title="解决方法2"></a>解决方法2</h1><p>在MySQL8.0前采用的是 <code>mysql_native_password</code> 认证方式，修改步骤如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -u root -p</span><br><span class="line">&gt;use mysql; 选择数据库(这一步不可省略)</span><br><span class="line">&gt;select host, user, plugin from user; // 查看plugin设置</span><br><span class="line">&gt;ALTER USER root@localhost IDENTIFIED WITH mysql_native_password BY &#x27;xxxxx&#x27;; // 将 root 用户的认证方式修改为 mysql_native_password</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2020/03/21/%E4%BD%BF%E7%94%A8flutter%E5%88%9B%E5%BB%BAmacOS%E6%A1%8C%E9%9D%A2%E8%BD%AF%E4%BB%B6%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF(%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/03/21/%E4%BD%BF%E7%94%A8flutter%E5%88%9B%E5%BB%BAmacOS%E6%A1%8C%E9%9D%A2%E8%BD%AF%E4%BB%B6%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF(%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0)/" class="post-title-link" itemprop="url">使用flutter创建macOS桌面软件常见错误(持续更新)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-03-21 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-21T00:00:00+08:00">2020-03-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-17 20:06:27" itemprop="dateModified" datetime="2022-04-17T20:06:27+08:00">2022-04-17</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Flutter 在桌面软件端还需要走很长的路～跨平台支持的通用插件是在是太少了…</p>
<h1 id="问题列表"><a href="#问题列表" class="headerlink" title="问题列表"></a>问题列表</h1><p>1.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ProcessException: Process exited abnormally:</span><br><span class="line">xcode-select: error: tool &#x27;xcodebuild&#x27; requires Xcode, but active developer</span><br><span class="line">directory &#x27;/Library/Developer/CommandLineTools&#x27; is a command line tools instance</span><br><span class="line">  Command: /usr/bin/xcodebuild -list -project Runner.xcodeproj</span><br></pre></td></tr></table></figure>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><p>打开命令行，再命令行输出以下命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xcode-select --install # 如果没有安装 Command Line Tools 的，需要执行这条命令</span><br><span class="line">sudo xcode-select --switch /Library/Developer/CommandLineTools # 启动 Command Line Tools</span><br></pre></td></tr></table></figure>
<p>可能会出现warning信息，可以忽略。如果你安装了 Xcode 的话，可以再执行下面的命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo xcode-select -s /Applications/Xcode.app/Contents/Developer # 后面是 Xcode 的路径，默认路径是这个</span><br></pre></td></tr></table></figure>


<p>2.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The argument type &#x27;MyState&#x27; can&#x27;t be assigned to the parameter type &#x27;TickerProvider&#x27;.</span><br></pre></td></tr></table></figure>
<h2 id="解决办法-1"><a href="#解决办法-1" class="headerlink" title="解决办法"></a>解决办法</h2><p>在State类的末尾添加 with TickerProviderStateMixin</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyHomePageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyHomePage</span>&gt; <span class="title">with</span> <span class="title">TickerProviderStateMixin</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2020/03/19/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%AB%99%E7%9A%84%E6%9B%B4%E6%96%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/03/19/%E5%85%B3%E4%BA%8E%E7%BD%91%E7%AB%99%E7%9A%84%E6%9B%B4%E6%96%B0/" class="post-title-link" itemprop="url">关于网站的更新</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-03-19 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-19T00:00:00+08:00">2020-03-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-17 20:06:27" itemprop="dateModified" datetime="2022-04-17T20:06:27+08:00">2022-04-17</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>这段时间在写稿子之余，为了让自己能够偶尔放松一下，决定将之前的博客更新一番。</p>
<h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><ol>
<li>更新主页的UI</li>
<li>更新了文章详情页的UI</li>
<li>移除了原来的时间轴，由<strong>归档</strong>替换了</li>
<li>更新了标签页</li>
<li>更新了原本的管理页面的主页</li>
<li>为文章增加了可以上传封面的选项</li>
<li>使用bootstrap4替换了原本的bootstrap4</li>
<li>使用了 font-awesome作为图标库</li>
</ol>
<h2 id="下个版本计划"><a href="#下个版本计划" class="headerlink" title="下个版本计划"></a>下个版本计划</h2><p>下个版本希望可以完成：</p>
<ol>
<li>自动备份文章</li>
<li>自动升级，一键升级</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2020/03/03/%E5%85%B3%E4%BA%8E%E5%8D%9A%E5%AE%A2%E5%92%8C%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E7%9A%84%E6%9B%B4%E6%96%B0%E8%AF%B4%E6%98%8E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/03/03/%E5%85%B3%E4%BA%8E%E5%8D%9A%E5%AE%A2%E5%92%8C%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E7%9A%84%E6%9B%B4%E6%96%B0%E8%AF%B4%E6%98%8E/" class="post-title-link" itemprop="url">关于博客和微信公众号的更新说明</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-03-03 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-03T00:00:00+08:00">2020-03-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-17 20:06:27" itemprop="dateModified" datetime="2022-04-17T20:06:27+08:00">2022-04-17</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在书稿没有完成之前，是不可能更新的。天天写稿子，感觉自己头发都快秃了。</p>
<p>写一本书难，写一本好书更难，写一本读者喜欢的书更是难上加难。同类的书已经有好几本了，写的也挺详实的，不过还是喜欢能写出一点新的东西来，还是希望到时候读者能够从我这里获取一点不一样的东西。</p>
<p>吐槽完了，接着去干活了。白天干活，晚上赶稿子～～～</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2019/12/25/SpringBoot%20%E4%BD%BF%E7%94%A8%20@Valid%20%E9%85%8D%E5%90%88%20BindingResult%20%E6%A0%A1%E9%AA%8C%E6%95%B0%E6%8D%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/12/25/SpringBoot%20%E4%BD%BF%E7%94%A8%20@Valid%20%E9%85%8D%E5%90%88%20BindingResult%20%E6%A0%A1%E9%AA%8C%E6%95%B0%E6%8D%AE/" class="post-title-link" itemprop="url">SpringBoot 使用 @Valid 配合 BindingResult 校验数据</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-12-25 00:00:00" itemprop="dateCreated datePublished" datetime="2019-12-25T00:00:00+08:00">2019-12-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-17 20:06:27" itemprop="dateModified" datetime="2022-04-17T20:06:27+08:00">2022-04-17</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在实际开发过程中，经常需要对前端传来的数据模型进行校验，一般情况下都是写一个专门的校验函数去校验，这种方式很显然不适合复杂的项目，因为随着项目复杂度的增加需要校验的数据模型越来越多，并且在开发过程中可能也需要时常修改数据模型，这就导致原来的校验方法可能需要时常的变动，也不利于维护。因为我们需要一种更简单的方式去完成这个工作。</p>
<h1 id="Valid-和-BindingResult"><a href="#Valid-和-BindingResult" class="headerlink" title="@Valid 和 BindingResult"></a>@Valid 和 BindingResult</h1><p>SpringBoot 在内部通过集成 hibernate-validation 已经实现了JSR-349验证规范接口，在SpringBoot项目中只要直接使用就行了。接下来通过一个简单的例子完整的介绍使用方法</p>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p>以注册用户为例</p>
<h3 id="定义-Bean"><a href="#定义-Bean" class="headerlink" title="定义 Bean"></a>定义 Bean</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="meta">@NotBlank(message=&quot;手机号不能为空&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="meta">@NotBlank(message=&quot;手机号不能为空&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPhone</span><span class="params">(String phone)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.phone = phone;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPhone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> phone;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="定义-Controller"><a href="#定义-Controller" class="headerlink" title="定义 Controller"></a>定义 Controller</h3><p>在 controller 类里面对相应的接口添加 @Valid,BindingResult 验证，如果检验失败，则获取错误信息返回前台</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@PostMapping(value = &quot;/register&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">login</span><span class="params">(<span class="meta">@RequstBody</span> <span class="meta">@Valid</span> User userInfo, BindingResult bindingResult)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (bindingResult.hasErrors()) &#123;</span><br><span class="line">            System.out.print(bindingResult.getFieldError().getDefaultMessage());</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> userInfo;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>上面给出了常用的处理方法，在实际开发过程中，通常为了返回数据格式的统一，可能会全局捕获异常，然后统一返回，这个时候上述 Controller 中的 BindResult 和 if 判断语句就可以省略了，然后在全局中捕获</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a target="_blank" rel="noopener" href="https://juejin.im/post/5b2f4514f265da597a6108f8">Java SpringBoot上的参数校验JSR 303 Validation</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://leetaogoooo.github.io/2019/12/17/py2app%20%E6%89%93%E5%8C%85%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.ico">
      <meta itemprop="name" content="Leetao">
      <meta itemprop="description" content="Je pense, donc je suis">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Leetao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/12/17/py2app%20%E6%89%93%E5%8C%85%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">py2app 打包相关问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-12-17 00:00:00" itemprop="dateCreated datePublished" datetime="2019-12-17T00:00:00+08:00">2019-12-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-04-17 20:06:27" itemprop="dateModified" datetime="2022-04-17T20:06:27+08:00">2022-04-17</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>最近一直在研究用 py2app 给自己写的 PyQt5 应用打包应用，在打包过程中遇到了一次问题，写在这里备忘一下。</p>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p><strong>问题一 AttributeError: module ‘string’ has no attribute ‘maketrans’</strong></p>
<p>这个问题从网上查找了一下发现好像是 PyQt 的问题，但是到现在也没有被修复。</p>
<p><strong>解决方法</strong>:修复起来也很简单,由于出问题的地方在 <strong>ascii_upper.py</strong> 文件中，找到这个文件，将 <strong>string</strong> 改成 <strong>str</strong> 然后保存就可以了</p>
<p><strong>问题二 打包后的应用一直出现  Segmentation fault: 11 错误</strong></p>
<p>出现这个问题的可能性有很多种，我一开始怀疑是 PyQt5 和 py2app 的问题，后来我尝试写了一个 PyQt5 最小应用，然后成功打包完美运行，自然这个猜测就被排除再外了。最后通过引用的库进行排查，成功的定位到错误了，原因出在我用的 <strong>aiohttp 库</strong>，去github上找了一下发现 <a target="_blank" rel="noopener" href="https://github.com/aio-libs/aiohttp/issues/2301">pyinstaller cannot import aiohttp</a> 这个 issue，最后无奈之下只好把用到 aiohttp 的部分用 requests 重写了，然后打包成功.</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/58496363/py2app-attributeerror-module-string-has-no-attribute-maketrans">py2app : AttributeError: module ‘string’ has no attribute ‘maketrans’</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Leetao</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"leetaoGoooo","repo":"leetaogoooo.github.io","client_id":"bf98ffa3f57b2591544e","client_secret":"cc5ffeff8863bb5c44ed10f024513dccfac14afa","admin_user":"leetaogoooo","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":null,"js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"5691cbcd1f6129dc3262ebee63fa0cff"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
